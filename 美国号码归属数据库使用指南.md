# ç¾å›½å·ç å½’å±æ•°æ®åº“ä½¿ç”¨æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
2. [æ•°æ®åº“æ¶æ„](#æ•°æ®åº“æ¶æ„)
3. [APIæ¥å£](#apiæ¥å£)
4. [æ•°æ®å¯¼å…¥](#æ•°æ®å¯¼å…¥)
5. [ä½¿ç”¨ç¤ºä¾‹](#ä½¿ç”¨ç¤ºä¾‹)
6. [ç»´æŠ¤æ›´æ–°](#ç»´æŠ¤æ›´æ–°)

---

## ç³»ç»Ÿæ¦‚è¿°

### åŠŸèƒ½ç‰¹æ€§

âœ… **ç²¾ç¡®æŸ¥è¯¢**ï¼šé€šè¿‡NPA-NXX-XXXXå·ç åˆ†è§£ï¼Œç²¾ç¡®åŒ¹é…è¿è¥å•†å½’å±  
âœ… **æ‰¹é‡åˆ†æ**ï¼šæ”¯æŒæ‰¹é‡å·ç æŸ¥è¯¢å’Œè¿è¥å•†åˆ†å¸ƒåˆ†æ  
âœ… **æ•°æ®å¯¼å…¥**ï¼šæä¾›CSVå¯¼å…¥å’ŒAPIå¯¼å…¥ä¸¤ç§æ–¹å¼  
âœ… **æ›´æ–°æ—¥å¿—**ï¼šå®Œæ•´è®°å½•æ¯æ¬¡æ•°æ®æ›´æ–°çš„å†å²  
âœ… **ç»Ÿè®¡è§†å›¾**ï¼šå®æ—¶ç»Ÿè®¡è¿è¥å•†è¦†ç›–èŒƒå›´å’Œå·ç æ•°é‡

### é€‚ç”¨åœºæ™¯

- ğŸ” å•å·ç æŸ¥è¯¢ï¼šéªŒè¯å•ä¸ªå·ç çš„è¿è¥å•†å½’å±
- ğŸ“Š æ–‡ä»¶åˆ†æï¼šåˆ†æTXTæ–‡ä»¶ä¸­æ‰€æœ‰å·ç çš„è¿è¥å•†åˆ†å¸ƒ
- ğŸ“ˆ æ‰¹é‡æå–ï¼šæŒ‰è¿è¥å•†åˆ†ç±»æå–å·ç æ•°æ®
- ğŸ”„ æ•°æ®åŒæ­¥ï¼šä»FCCç­‰æ•°æ®æºå®šæœŸæ›´æ–°å½’å±ä¿¡æ¯

---

## æ•°æ®åº“æ¶æ„

### æ ¸å¿ƒè¡¨ç»“æ„

#### 1. us_phone_carrierï¼ˆå·ç å½’å±è¡¨ï¼‰

å­˜å‚¨å·ç æ®µåˆ°è¿è¥å•†çš„æ˜ å°„å…³ç³»ã€‚

```sql
CREATE TABLE `us_phone_carrier` (
  `id` INT AUTO_INCREMENT PRIMARY KEY,
  `npa` CHAR(3) NOT NULL COMMENT 'åŒºå·(Area Code)',
  `nxx` CHAR(3) NOT NULL COMMENT 'å‰ç¼€(Exchange)',
  `start_range` CHAR(4) NOT NULL COMMENT 'èµ·å§‹å·æ®µ',
  `end_range` CHAR(4) NOT NULL COMMENT 'ç»“æŸå·æ®µ',
  `carrier_name` VARCHAR(100) NOT NULL COMMENT 'è¿è¥å•†åç§°',
  `carrier_type` VARCHAR(50) COMMENT 'è¿è¥å•†ç±»å‹',
  `state` VARCHAR(50) COMMENT 'å·å',
  `city` VARCHAR(100) COMMENT 'åŸå¸‚',
  `last_update` BIGINT NOT NULL COMMENT 'æœ€åæ›´æ–°æ—¶é—´æˆ³',
  `data_source` VARCHAR(100) DEFAULT 'FCC' COMMENT 'æ•°æ®æ¥æº',
  
  UNIQUE KEY `uk_number_range` (`npa`, `nxx`, `start_range`, `end_range`),
  INDEX `idx_npa_nxx` (`npa`, `nxx`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

**å­—æ®µè¯´æ˜**ï¼š
- `npa`ï¼šåŒ—ç¾ç¼–å·è®¡åˆ’åŒºå·ï¼ˆArea Codeï¼‰ï¼Œå¦‚ `212`, `310`
- `nxx`ï¼šäº¤æ¢æœºå‰ç¼€ï¼ˆExchangeï¼‰ï¼Œå¦‚ `200`, `555`
- `start_range` / `end_range`ï¼šå4ä½å·ç èŒƒå›´ï¼Œå¦‚ `0000-9999`
- `carrier_name`ï¼šè¿è¥å•†åç§°ï¼Œå¦‚ `Verizon Wireless`, `AT&T Mobility`
- `carrier_type`ï¼šç±»å‹ï¼ˆWireless/Landline/VoIPï¼‰

**ç¤ºä¾‹æ•°æ®**ï¼š
```
| npa | nxx | start_range | end_range | carrier_name     | state      | city        |
|-----|-----|-------------|-----------|------------------|------------|-------------|
| 212 | 200 | 0000        | 9999      | Verizon Wireless | New York   | New York    |
| 212 | 201 | 0000        | 9999      | AT&T Mobility    | New York   | New York    |
| 310 | 200 | 0000        | 9999      | Verizon Wireless | California | Los Angeles |
```

#### 2. us_carriersï¼ˆè¿è¥å•†ä¸»è¡¨ï¼‰

å­˜å‚¨è¿è¥å•†åŸºæœ¬ä¿¡æ¯å’Œå¸‚åœºç»Ÿè®¡ã€‚

```sql
CREATE TABLE `us_carriers` (
  `id` INT AUTO_INCREMENT PRIMARY KEY,
  `carrier_name` VARCHAR(100) NOT NULL UNIQUE,
  `carrier_code` VARCHAR(50) COMMENT 'è¿è¥å•†ä»£ç ',
  `market_share` DECIMAL(5,2) DEFAULT 0.00 COMMENT 'å¸‚åœºä»½é¢(%)',
  `status` TINYINT DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š0-åœç”¨ï¼Œ1-å¯ç”¨',
  -- å…¶ä»–å­—æ®µ...
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

#### 3. us_carrier_update_logï¼ˆæ›´æ–°æ—¥å¿—è¡¨ï¼‰

è®°å½•æ¯æ¬¡æ•°æ®å¯¼å…¥/æ›´æ–°çš„è¯¦ç»†ä¿¡æ¯ã€‚

```sql
CREATE TABLE `us_carrier_update_log` (
  `id` INT AUTO_INCREMENT PRIMARY KEY,
  `update_type` VARCHAR(50) NOT NULL COMMENT 'æ›´æ–°ç±»å‹ï¼šfull/incremental',
  `records_added` INT DEFAULT 0,
  `records_updated` INT DEFAULT 0,
  `status` VARCHAR(20) DEFAULT 'success',
  `start_time` BIGINT NOT NULL,
  `duration` INT COMMENT 'è€—æ—¶(ç§’)',
  -- å…¶ä»–å­—æ®µ...
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
```

### æ•°æ®åº“è§†å›¾

#### v_us_carrier_statsï¼ˆè¿è¥å•†ç»Ÿè®¡è§†å›¾ï¼‰

å®æ—¶ç»Ÿè®¡æ¯ä¸ªè¿è¥å•†çš„è¦†ç›–æƒ…å†µã€‚

```sql
CREATE VIEW `v_us_carrier_stats` AS
SELECT 
  c.carrier_name,
  c.carrier_type,
  c.market_share,
  COUNT(DISTINCT p.npa) AS area_codes_count,
  COUNT(*) AS number_ranges_count
FROM us_carriers c
LEFT JOIN us_phone_carrier p ON c.carrier_name = p.carrier_name
WHERE c.status = 1
GROUP BY c.id
ORDER BY c.market_share DESC;
```

### å­˜å‚¨è¿‡ç¨‹

#### sp_get_phone_carrierï¼ˆå•å·ç æŸ¥è¯¢ï¼‰

è¾“å…¥å®Œæ•´å·ç ï¼Œè¿”å›è¿è¥å•†ä¿¡æ¯ã€‚

```sql
CALL sp_get_phone_carrier('12122001234');
-- è¿”å›: Verizon Wireless, New York, NY
```

---

## APIæ¥å£

### åŸºç¡€URL

```
http://localhost:3000/api/us-phone-carrier
```

### è®¤è¯

æ‰€æœ‰APIæ¥å£éœ€è¦JWT Tokenè®¤è¯ï¼š

```bash
Authorization: Bearer <token>
```

### æ¥å£åˆ—è¡¨

#### 1. æŸ¥è¯¢å•ä¸ªå·ç è¿è¥å•†

**è¯·æ±‚**ï¼š
```http
POST /api/us-phone-carrier/query-single
Content-Type: application/json

{
  "phoneNumber": "12122001234"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "phoneNumber": "12122001234",
    "carrierName": "Verizon Wireless",
    "carrierType": "Wireless",
    "state": "New York",
    "city": "New York",
    "ocn": null,
    "rateCenter": null
  }
}
```

#### 2. æ‰¹é‡æŸ¥è¯¢å·ç è¿è¥å•†

**è¯·æ±‚**ï¼š
```http
POST /api/us-phone-carrier/query-batch
Content-Type: application/json

{
  "phoneNumbers": [
    "12122001234",
    "13102005678",
    "13122009999"
  ]
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": [
    {
      "phoneNumber": "12122001234",
      "carrierName": "Verizon Wireless",
      "carrierType": "Wireless",
      "state": "New York",
      "city": "New York"
    },
    {
      "phoneNumber": "13102005678",
      "carrierName": "Verizon Wireless",
      "carrierType": "Wireless",
      "state": "California",
      "city": "Los Angeles"
    }
  ]
}
```

#### 3. åˆ†æè¿è¥å•†åˆ†å¸ƒ

**è¯·æ±‚**ï¼š
```http
POST /api/us-phone-carrier/analyze-distribution
Content-Type: application/json

{
  "phoneNumbers": [
    "12122001234",
    "12122011111",
    "13102002222",
    "13102013333"
  ]
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "totalCount": 4,
    "distribution": [
      {
        "name": "Verizon Wireless",
        "count": 4,
        "percentage": "100.00"
      }
    ],
    "unmatchedCount": 0,
    "unmatchedPercentage": "0.00"
  }
}
```

#### 4. è·å–è¿è¥å•†åˆ—è¡¨

**è¯·æ±‚**ï¼š
```http
GET /api/us-phone-carrier/carriers
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "carrier_name": "Verizon Wireless",
      "carrier_code": "VZW",
      "market_share": "35.00",
      "status": 1
    },
    {
      "id": 2,
      "carrier_name": "AT&T Mobility",
      "carrier_code": "ATT",
      "market_share": "32.00",
      "status": 1
    }
  ]
}
```

#### 5. è·å–è¿è¥å•†ç»Ÿè®¡

**è¯·æ±‚**ï¼š
```http
GET /api/us-phone-carrier/carrier-stats
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": [
    {
      "carrier_name": "Verizon Wireless",
      "carrier_type": "Wireless",
      "market_share": "35.00",
      "area_codes_count": 9,
      "number_ranges_count": 12
    }
  ]
}
```

#### 6. å¯¼å…¥å·ç å½’å±æ•°æ®

**è¯·æ±‚**ï¼š
```http
POST /api/us-phone-carrier/import-data
Content-Type: application/json

{
  "data": [
    {
      "npa": "415",
      "nxx": "555",
      "start_range": "0000",
      "end_range": "9999",
      "carrier_name": "AT&T Mobility",
      "carrier_type": "Wireless",
      "state": "California",
      "city": "San Francisco"
    }
  ],
  "dataSource": "FCC Update",
  "sourceFile": "fcc_data_2025.csv"
}
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "message": "æ•°æ®å¯¼å…¥æˆåŠŸ",
  "data": {
    "addedCount": 1,
    "updatedCount": 0,
    "totalCount": 1,
    "duration": 2
  }
}
```

#### 7. è·å–æ›´æ–°æ—¥å¿—

**è¯·æ±‚**ï¼š
```http
GET /api/us-phone-carrier/update-logs?page=1&pageSize=20
```

**å“åº”**ï¼š
```json
{
  "success": true,
  "data": {
    "total": 5,
    "list": [
      {
        "id": 5,
        "update_type": "manual",
        "records_added": 100,
        "records_updated": 50,
        "status": "success",
        "start_time": 1760640000000,
        "duration": 30,
        "operator": "admin"
      }
    ],
    "page": 1,
    "pageSize": 20
  }
}
```

---

## æ•°æ®å¯¼å…¥

### æ–¹æ³•ä¸€ï¼šCSVæ–‡ä»¶å¯¼å…¥

#### å‡†å¤‡CSVæ–‡ä»¶

CSVæ ¼å¼è¦æ±‚ï¼ˆç¬¬ä¸€è¡Œä¸ºæ ‡é¢˜ï¼‰ï¼š

```csv
NPA,NXX,StartRange,EndRange,CarrierName,CarrierType,State,City,OCN,LATA,RateCenter
212,200,0000,9999,Verizon Wireless,Wireless,New York,New York,,,
212,201,0000,9999,AT&T Mobility,Wireless,New York,New York,,,
310,200,0000,9999,Verizon Wireless,Wireless,California,Los Angeles,,,
```

**å¿…å¡«å­—æ®µ**ï¼š
- NPAï¼ˆåŒºå·ï¼‰
- NXXï¼ˆå‰ç¼€ï¼‰
- CarrierNameï¼ˆè¿è¥å•†åç§°ï¼‰

**å¯é€‰å­—æ®µ**ï¼š
- StartRange / EndRangeï¼ˆé»˜è®¤ 0000-9999ï¼‰
- CarrierType, State, City, OCN, LATA, RateCenter

#### æ‰§è¡Œå¯¼å…¥

```bash
cd /home/vue-element-admin/backend
node scripts/importUSCarrierData.js import /path/to/data.csv
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
å¼€å§‹å¯¼å…¥æ•°æ®...
æºæ–‡ä»¶: /path/to/data.csv
å·²å¤„ç† 1000 æ¡è®°å½•...
å·²å¤„ç† 2000 æ¡è®°å½•...

å¯¼å…¥å®Œæˆï¼
æ–°å¢è®°å½•: 1850
æ›´æ–°è®°å½•: 150
é”™è¯¯è®°å½•: 0
è€—æ—¶: 45ç§’
```

### æ–¹æ³•äºŒï¼šç”Ÿæˆç¤ºä¾‹æ•°æ®

ç”¨äºæµ‹è¯•æˆ–åˆå§‹åŒ–ï¼š

```bash
cd /home/vue-element-admin/backend
node scripts/importUSCarrierData.js sample
```

è¿™å°†ç”Ÿæˆè¦†ç›–ç¾å›½10å¤§åŸå¸‚çš„ç¤ºä¾‹æ•°æ®ï¼ˆ200æ¡è®°å½•ï¼‰ã€‚

### æ–¹æ³•ä¸‰ï¼šAPIå¯¼å…¥

é€šè¿‡HTTP APIå¯¼å…¥æ•°æ®ï¼ˆé€‚åˆè‡ªåŠ¨åŒ–æ›´æ–°ï¼‰ï¼š

```bash
curl -X POST http://localhost:3000/api/us-phone-carrier/import-data \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "data": [
      {
        "npa": "415",
        "nxx": "555",
        "carrier_name": "T-Mobile USA",
        "carrier_type": "Wireless",
        "state": "California",
        "city": "San Francisco"
      }
    ],
    "dataSource": "API Import",
    "sourceFile": "api_update.json"
  }'
```

### æ¸…ç©ºæ‰€æœ‰æ•°æ®

âš ï¸ **å±é™©æ“ä½œ**ï¼Œä»…åœ¨éœ€è¦é‡æ–°å¯¼å…¥æ—¶ä½¿ç”¨ï¼š

```bash
cd /home/vue-element-admin/backend
node scripts/importUSCarrierData.js clear
```

---

## ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šåœ¨æ•°æ®å¤„ç†ä¸­ä½¿ç”¨ï¼ˆå‰ç«¯ï¼‰

å½“ç”¨æˆ·é€‰æ‹©ç¾å›½ï¼ˆå›½ç 1ï¼‰è¿›è¡Œè¿è¥å•†æå–æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢ï¼š

```vue
<template>
  <el-select v-model="selectedCountry" @change="handleCountryChange">
    <el-option label="United States (+1)" value="1" />
    <el-option label="Bangladesh (+880)" value="880" />
  </el-select>
</template>

<script>
export default {
  methods: {
    async handleCountryChange(countryCode) {
      if (countryCode === '1') {
        // ç¾å›½å·ç ï¼šä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢
        const response = await this.$axios.post('/api/data-processing/analyze-operator-distribution', {
          fileId: this.currentFileId,
          countryCode: '1',
          operators: [] // ç¾å›½ä¸éœ€è¦é¢„å®šä¹‰è¿è¥å•†
        });
        
        // æ˜¾ç¤ºå®é™…è¿è¥å•†åˆ†å¸ƒ
        this.operatorDistribution = response.data.distribution;
      } else {
        // å…¶ä»–å›½å®¶ï¼šä½¿ç”¨å·æ®µåŒ¹é…
        // ...
      }
    }
  }
}
</script>
```

### ç¤ºä¾‹2ï¼šåç«¯é›†æˆ

åœ¨ `dataProcessing.js` è·¯ç”±ä¸­çš„å®ç°ï¼š

```javascript
router.post('/analyze-operator-distribution', async (req, res) => {
  const { fileId, countryCode } = req.body;
  
  if (countryCode === '1') {
    // ç¾å›½ï¼šä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢
    const phoneNumbers = await readFileLines(file.file_path);
    
    const response = await axios.post(
      'http://localhost:3000/api/us-phone-carrier/analyze-distribution',
      { phoneNumbers }
    );
    
    return res.json({
      success: true,
      data: response.data.data
    });
  } else {
    // å…¶ä»–å›½å®¶ï¼šä½¿ç”¨å·æ®µåŒ¹é…
    const result = await DataProcessor.analyzeOperatorDistribution(
      file.file_path,
      { countryCode, operators }
    );
    
    return res.json({ success: true, data: result });
  }
});
```

### ç¤ºä¾‹3ï¼šç›´æ¥æŸ¥è¯¢

ä½¿ç”¨MySQLå­˜å‚¨è¿‡ç¨‹ç›´æ¥æŸ¥è¯¢ï¼š

```sql
-- æŸ¥è¯¢å•ä¸ªå·ç 
CALL sp_get_phone_carrier('12122001234');

-- ç»“æœï¼š
-- carrier_name: Verizon Wireless
-- carrier_type: Wireless
-- state: New York
-- city: New York
```

---

## ç»´æŠ¤æ›´æ–°

### å®šæœŸæ›´æ–°æ•°æ®

#### ä»FCCè·å–æœ€æ–°æ•°æ®

1. è®¿é—® [FCC NANPA](https://www.nationalnanpa.com/) ä¸‹è½½æœ€æ–°å·ç åˆ†é…æ•°æ®
2. è½¬æ¢ä¸ºCSVæ ¼å¼ï¼ˆå‚è€ƒä¸Šè¿°æ ¼å¼ï¼‰
3. æ‰§è¡Œå¯¼å…¥å‘½ä»¤

```bash
node scripts/importUSCarrierData.js import fcc_latest.csv
```

#### å¢é‡æ›´æ–°

å¯¹äºå°æ‰¹é‡æ›´æ–°ï¼Œä½¿ç”¨APIå¯¼å…¥ï¼š

```bash
curl -X POST http://localhost:3000/api/us-phone-carrier/import-data \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d @incremental_update.json
```

### æŸ¥çœ‹æ›´æ–°å†å²

é€šè¿‡APIæŸ¥çœ‹æ‰€æœ‰æ›´æ–°æ—¥å¿—ï¼š

```bash
curl -X GET "http://localhost:3000/api/us-phone-carrier/update-logs?page=1&pageSize=50" \
  -H "Authorization: Bearer <token>"
```

æˆ–ç›´æ¥æŸ¥è¯¢æ•°æ®åº“ï¼š

```sql
SELECT 
  update_type,
  records_added,
  records_updated,
  status,
  FROM_UNIXTIME(start_time/1000) as update_time,
  duration,
  operator
FROM us_carrier_update_log
ORDER BY start_time DESC
LIMIT 20;
```

### æ•°æ®åº“ç»´æŠ¤

#### ç´¢å¼•ä¼˜åŒ–

å®šæœŸåˆ†æå’Œä¼˜åŒ–ç´¢å¼•ï¼š

```sql
ANALYZE TABLE us_phone_carrier;
OPTIMIZE TABLE us_phone_carrier;
```

#### æ•°æ®æ¸…ç†

åˆ é™¤è¿‡æœŸæˆ–æ— æ•ˆæ•°æ®ï¼š

```sql
-- åˆ é™¤è¶…è¿‡1å¹´æœªæ›´æ–°çš„æ•°æ®
DELETE FROM us_phone_carrier
WHERE last_update < UNIX_TIMESTAMP(DATE_SUB(NOW(), INTERVAL 1 YEAR)) * 1000;
```

#### å¤‡ä»½æ•°æ®

å®šæœŸå¤‡ä»½æ•°æ®åº“ï¼š

```bash
# å¤‡ä»½å·ç å½’å±æ•°æ®
mysqldump -u root vue_admin us_phone_carrier us_carriers us_carrier_update_log > us_carrier_backup_$(date +%Y%m%d).sql

# æ¢å¤å¤‡ä»½
mysql -u root vue_admin < us_carrier_backup_20251016.sql
```

---

## å½“å‰æ•°æ®çŠ¶æ€

### æ•°æ®åº“ç»Ÿè®¡

```sql
SELECT 
  COUNT(*) as total_records,
  COUNT(DISTINCT npa) as area_codes,
  COUNT(DISTINCT carrier_name) as carriers,
  COUNT(DISTINCT state) as states
FROM us_phone_carrier;
```

**å½“å‰æ•°æ®**ï¼ˆ2025-10-16ï¼‰ï¼š
- æ€»è®°å½•æ•°ï¼š36æ¡
- è¦†ç›–åŒºå·ï¼š9ä¸ªï¼ˆ212, 310, 312, 415, 617, 202, 305, 404, 206ï¼‰
- è¿è¥å•†ï¼š5ä¸ªï¼ˆVerizon, AT&T, T-Mobile, Sprint, US Cellularï¼‰
- è¦†ç›–å·ï¼š7ä¸ª

### è¦†ç›–åŸå¸‚

| åŒºå· | åŸå¸‚ | å· | è¿è¥å•†æ•° |
|------|------|-----|---------|
| 212 | New York | New York | 5 |
| 310 | Los Angeles | California | 5 |
| 312 | Chicago | Illinois | 5 |
| 415 | San Francisco | California | 3 |
| 617 | Boston | Massachusetts | 3 |
| 202 | Washington | D.C. | 3 |
| 305 | Miami | Florida | 3 |
| 404 | Atlanta | Georgia | 3 |
| 206 | Seattle | Washington | 3 |

---

## æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

#### 1. æŸ¥è¯¢è¿”å›ç©ºç»“æœ

**åŸå› **ï¼šæ•°æ®åº“ä¸­æ²¡æœ‰è¯¥å·ç æ®µçš„å½’å±ä¿¡æ¯

**è§£å†³**ï¼š
1. æ£€æŸ¥å·ç æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆ10ä½æ•°å­—ï¼‰
2. æŸ¥è¯¢è¯¥NPA-NXXæ˜¯å¦å­˜åœ¨äºæ•°æ®åº“
3. ä»FCCæ•°æ®æºè¡¥å……ç¼ºå¤±çš„å·æ®µ

```sql
-- æ£€æŸ¥æŸä¸ªNPA-NXXæ˜¯å¦å­˜åœ¨
SELECT * FROM us_phone_carrier
WHERE npa = '415' AND nxx = '555';
```

#### 2. å¯¼å…¥æ•°æ®å¤±è´¥

**é”™è¯¯**ï¼š`Duplicate entry 'xxx' for key 'uk_number_range'`

**åŸå› **ï¼šå°è¯•å¯¼å…¥å·²å­˜åœ¨çš„å·æ®µ

**è§£å†³**ï¼š
- ä½¿ç”¨ `ON DUPLICATE KEY UPDATE` è¯­å¥æ›´æ–°
- æˆ–å…ˆåˆ é™¤æ—§æ•°æ®å†å¯¼å…¥

#### 3. APIè¶…æ—¶

**åŸå› **ï¼šæ‰¹é‡æŸ¥è¯¢å·ç è¿‡å¤š

**è§£å†³**ï¼š
- åˆ†æ‰¹æŸ¥è¯¢ï¼Œæ¯æ‰¹ä¸è¶…è¿‡1000æ¡
- ä¼˜åŒ–æ•°æ®åº“ç´¢å¼•
- å¢åŠ æœåŠ¡å™¨è¶…æ—¶æ—¶é—´

---

## æ€§èƒ½ä¼˜åŒ–å»ºè®®

### æ•°æ®åº“å±‚é¢

1. **ç´¢å¼•ä¼˜åŒ–**ï¼šç¡®ä¿ `npa`, `nxx` å­—æ®µæœ‰å¤åˆç´¢å¼•
2. **åˆ†åŒºè¡¨**ï¼šå¯¹äºè¶…å¤§æ•°æ®é›†ï¼ˆ>1000ä¸‡æ¡ï¼‰ï¼Œå¯è€ƒè™‘æŒ‰NPAåˆ†åŒº
3. **ç¼“å­˜**ï¼šä½¿ç”¨Redisç¼“å­˜çƒ­é—¨å·æ®µæŸ¥è¯¢ç»“æœ

### åº”ç”¨å±‚é¢

1. **æ‰¹é‡æŸ¥è¯¢**ï¼šé¿å…å•æ¡æŸ¥è¯¢ï¼Œä½¿ç”¨æ‰¹é‡API
2. **å¼‚æ­¥å¤„ç†**ï¼šå¤§æ–‡ä»¶åˆ†æä½¿ç”¨åå°ä»»åŠ¡é˜Ÿåˆ—
3. **ç»“æœç¼“å­˜**ï¼šç›¸åŒæ–‡ä»¶çš„åˆ†æç»“æœç¼“å­˜1å°æ—¶

---

## æ‰©å±•è®¡åˆ’

### çŸ­æœŸï¼ˆ1-3ä¸ªæœˆï¼‰

- [ ] å¯¼å…¥å®Œæ•´çš„FCC NANPAæ•°æ®åº“ï¼ˆé¢„è®¡500ä¸‡+è®°å½•ï¼‰
- [ ] æ·»åŠ å·ç å½’å±APIçš„Redisç¼“å­˜å±‚
- [ ] å®ç°å®šæ—¶è‡ªåŠ¨æ›´æ–°ä»»åŠ¡ï¼ˆæ¯æœˆåŒæ­¥FCCæ•°æ®ï¼‰

### ä¸­æœŸï¼ˆ3-6ä¸ªæœˆï¼‰

- [ ] æ”¯æŒåŠ æ‹¿å¤§å·ç å½’å±æŸ¥è¯¢ï¼ˆ+1åŒºå·ï¼‰
- [ ] æ·»åŠ å†å²å½’å±å˜æ›´è®°å½•ï¼ˆå·ç è½¬ç½‘trackingï¼‰
- [ ] æä¾›å·ç å½’å±æ•°æ®å¯¼å‡ºåŠŸèƒ½

### é•¿æœŸï¼ˆ6-12ä¸ªæœˆï¼‰

- [ ] é›†æˆå…¨çƒä¸»è¦å›½å®¶å·ç å½’å±æ•°æ®åº“
- [ ] æœºå™¨å­¦ä¹ é¢„æµ‹å·ç è¿è¥å•†å½’å±
- [ ] æä¾›SaaS APIæœåŠ¡

---

## æŠ€æœ¯æ”¯æŒ

### è”ç³»æ–¹å¼

- ğŸ“§ Email: support@example.com
- ğŸ“ æŠ€æœ¯æ”¯æŒ: +1-xxx-xxx-xxxx
- ğŸ’¬ åœ¨çº¿æ–‡æ¡£: http://docs.example.com

### ç›¸å…³èµ„æº

- [FCC NANPAå®˜ç½‘](https://www.nationalnanpa.com/)
- [åŒ—ç¾ç¼–å·è®¡åˆ’](https://en.wikipedia.org/wiki/North_American_Numbering_Plan)
- [Sequelizeæ–‡æ¡£](https://sequelize.org/)
- [Express.jsæ–‡æ¡£](https://expressjs.com/)

---

*æœ€åæ›´æ–°ï¼š2025-10-16*  
*ç‰ˆæœ¬ï¼šv1.0.0*

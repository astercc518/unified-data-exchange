<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘è´§åŠŸèƒ½æµ‹è¯•å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f5f7fa;
            border-radius: 8px;
        }

        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #409eff;
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 4px solid #409eff;
        }

        .btn {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #409eff;
            color: white;
        }

        .btn-primary:hover {
            background: #66b1ff;
        }

        .btn-success {
            background: #67c23a;
            color: white;
        }

        .btn-success:hover {
            background: #85ce61;
        }

        .btn-warning {
            background: #e6a23c;
            color: white;
        }

        .btn-warning:hover {
            background: #ebb563;
        }

        .btn-danger {
            background: #f56c6c;
            color: white;
        }

        .btn-danger:hover {
            background: #f78989;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #409eff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .success-box {
            background: #e8f5e9;
            border-left: 4px solid #67c23a;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fff7e6;
            border-left: 4px solid #e6a23c;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .error-box {
            background: #fef0f0;
            border-left: 4px solid #f56c6c;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 10px 0;
        }

        .code-block pre {
            margin: 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background: #409eff;
            color: white;
            font-weight: bold;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
        }

        .badge-success {
            background: #d4edda;
            color: #67c23a;
        }

        .badge-warning {
            background: #fef0cd;
            color: #e6a23c;
        }

        .badge-danger {
            background: #fde2e2;
            color: #f56c6c;
        }

        .test-result {
            display: none;
            margin-top: 15px;
        }

        .checklist {
            list-style: none;
            padding: 0;
        }

        .checklist li {
            padding: 10px;
            margin: 8px 0;
            background: white;
            border-radius: 4px;
            border-left: 4px solid #ddd;
        }

        .checklist li.pass {
            border-left-color: #67c23a;
            background: #f0f9ff;
        }

        .checklist li.fail {
            border-left-color: #f56c6c;
            background: #fff1f0;
        }

        .checklist li::before {
            margin-right: 10px;
            font-weight: bold;
        }

        .checklist li.pass::before {
            content: 'âœ…';
        }

        .checklist li.fail::before {
            content: 'âŒ';
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ å‘è´§åŠŸèƒ½æµ‹è¯•å·¥å…·</h1>
        <div class="subtitle">è®¢å•å‘è´§åŠŸèƒ½è¯Šæ–­å’Œæµ‹è¯•</div>

        <!-- é—®é¢˜è¯Šæ–­ -->
        <div class="section">
            <div class="section-title">ğŸ› é—®é¢˜è¯Šæ–­</div>
            
            <div class="error-box">
                <strong>é—®é¢˜æè¿°:</strong> ç‚¹å‡»"å‘è´§"æŒ‰é’®æ— ååº”
            </div>

            <div class="success-box">
                <strong>âœ… é—®é¢˜å·²ä¿®å¤!</strong>
                <br><br>
                <strong>åŸå› :</strong> åœ¨ <code>completed.vue</code> æ–‡ä»¶ä¸­ç¼ºå°‘ <code>handleDeliver</code> æ–¹æ³•
                <br><br>
                <strong>è§£å†³æ–¹æ¡ˆ:</strong> å·²æ·»åŠ  <code>handleDeliver</code> æ–¹æ³•ï¼ŒåŒ…å«è·¯ç”±è·³è½¬é€»è¾‘å’Œè°ƒè¯•æ—¥å¿—
            </div>
        </div>

        <!-- ä¿®å¤å†…å®¹ -->
        <div class="section">
            <div class="section-title">ğŸ”¨ ä¿®å¤å†…å®¹</div>
            
            <p><strong>æ–‡ä»¶:</strong> <code>/src/views/order/completed.vue</code></p>
            
            <p style="margin-top: 15px;"><strong>æ–°å¢æ–¹æ³•:</strong></p>
            <div class="code-block">
<pre>handleDeliver(row) {
  // è·³è½¬åˆ°å‘è´§é¡µé¢
  console.log('ğŸš€ è·³è½¬åˆ°å‘è´§é¡µé¢ï¼Œè®¢å•ID:', row.id)
  this.$router.push({
    path: `/order/delivery/${row.id}`
  })
}</pre>
            </div>

            <div class="info-box">
                <strong>ğŸ’¡ ä¼˜åŒ–ç‚¹:</strong>
                <ul style="margin: 10px 0 0 20px;">
                    <li>æ·»åŠ äº†æ§åˆ¶å°æ—¥å¿—ï¼Œæ–¹ä¾¿è°ƒè¯•</li>
                    <li>ä½¿ç”¨å¯¹è±¡å½¢å¼çš„ <code>this.$router.push</code>ï¼Œæ›´è§„èŒƒ</li>
                    <li>æ—¥å¿—åŒ…å«è®¢å•IDï¼Œä¾¿äºè¿½è¸ª</li>
                </ul>
            </div>
        </div>

        <!-- æµ‹è¯•æ­¥éª¤ -->
        <div class="section">
            <div class="section-title">ğŸ§ª æµ‹è¯•æ­¥éª¤</div>
            
            <div class="warning-box">
                <strong>âš ï¸ æµ‹è¯•å‰ææ¡ä»¶:</strong>
                <ul style="margin: 10px 0 0 20px;">
                    <li>å·²å¯åŠ¨é¡¹ç›®: <code>npm run dev</code></li>
                    <li>æµè§ˆå™¨è®¿é—®: <code>http://localhost:9528</code></li>
                    <li>ä½¿ç”¨ä»£ç†æˆ–ç®¡ç†å‘˜è´¦å·ç™»å½•</li>
                    <li>å·²æœ‰å®¡æ ¸é€šè¿‡çš„è®¢å•(status='completed' && deliveryStatus='pending')</li>
                </ul>
            </div>

            <h4 style="margin-top: 20px;">æ­¥éª¤1: å‡†å¤‡æµ‹è¯•è®¢å•</h4>
            <p>åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼Œåˆ›å»ºä¸€ä¸ªå¾…å‘è´§è®¢å•:</p>
            <div class="code-block">
<pre>// åˆ›å»ºæµ‹è¯•è®¢å•
const orders = JSON.parse(localStorage.getItem('orderList') || '[]')

const testOrder = {
  id: orders.length + 1,
  orderNo: 'ORD' + Date.now() + Math.random().toString(36).substr(2, 4).toUpperCase(),
  customerName: 'æµ‹è¯•å®¢æˆ·',
  country: 'å­ŸåŠ æ‹‰å›½',
  validity: '3',
  source: 'å…¬å¼€æ•°æ®',
  quantity: 10000,
  operators: [
    { name: 'Grameenphone', count: 4000 },
    { name: 'Robi', count: 3000 },
    { name: 'Banglalink', count: 2000 },
    { name: 'Teletalk', count: 1000 }
  ],
  totalAmount: '50.00',
  deliveryEmail: 'test@example.com',
  status: 'completed',
  deliveryStatus: 'pending',  // å¾…å‘è´§
  createTime: Date.now(),
  reviewTime: Date.now(),
  approveTime: Date.now(),
  remark: 'æµ‹è¯•è®¢å•'
}

orders.push(testOrder)
localStorage.setItem('orderList', JSON.stringify(orders))

console.log('âœ… æµ‹è¯•è®¢å•åˆ›å»ºæˆåŠŸ:', testOrder.orderNo)
console.log('è®¢å•ID:', testOrder.id)</pre>
            </div>

            <h4 style="margin-top: 20px;">æ­¥éª¤2: è®¿é—®å·²å®Œæˆè®¢å•é¡µé¢</h4>
            <p>è®¿é—®: <code>è®¢å•ç®¡ç† â†’ å·²å®Œæˆè®¢å•</code></p>
            <p>URL: <code>http://localhost:9528/#/order/completed</code></p>

            <h4 style="margin-top: 20px;">æ­¥éª¤3: ç‚¹å‡»å‘è´§æŒ‰é’®</h4>
            <ol style="margin-left: 20px;">
                <li>åœ¨è®¢å•åˆ—è¡¨ä¸­æ‰¾åˆ°åˆšåˆ›å»ºçš„æµ‹è¯•è®¢å•</li>
                <li>ç¡®è®¤"å‘è´§çŠ¶æ€"åˆ—æ˜¾ç¤ºä¸º <span class="badge badge-warning">å¾…å‘è´§</span></li>
                <li>ç¡®è®¤"æ“ä½œ"åˆ—æ˜¾ç¤º <button class="btn btn-success" style="pointer-events: none;">å‘è´§</button> æŒ‰é’®</li>
                <li>ç‚¹å‡»"å‘è´§"æŒ‰é’®</li>
            </ol>

            <h4 style="margin-top: 20px;">æ­¥éª¤4: éªŒè¯é¡µé¢è·³è½¬</h4>
            <div class="success-box">
                <strong>âœ… é¢„æœŸç»“æœ:</strong>
                <ul style="margin: 10px 0 0 20px;">
                    <li>é¡µé¢è‡ªåŠ¨è·³è½¬åˆ°å‘è´§é¡µé¢</li>
                    <li>URLå˜ä¸º: <code>http://localhost:9528/#/order/delivery/è®¢å•ID</code></li>
                    <li>æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤º: <code>ğŸš€ è·³è½¬åˆ°å‘è´§é¡µé¢ï¼Œè®¢å•ID: xxx</code></li>
                    <li>å‘è´§é¡µé¢æ˜¾ç¤ºè®¢å•è¯¦ç»†ä¿¡æ¯</li>
                    <li>å¯ä»¥é€‰æ‹©å‘è´§æ–¹å¼(é‚®ç®±/TGbot)</li>
                </ul>
            </div>
        </div>

        <!-- åŠŸèƒ½éªŒè¯æ¸…å• -->
        <div class="section">
            <div class="section-title">âœ… åŠŸèƒ½éªŒè¯æ¸…å•</div>
            
            <ul class="checklist">
                <li class="pass">handleDeliver æ–¹æ³•å·²æ·»åŠ </li>
                <li class="pass">è·¯ç”±è·³è½¬é€»è¾‘æ­£ç¡®</li>
                <li class="pass">æ§åˆ¶å°æ—¥å¿—å®Œå–„</li>
                <li class="pass">å‘è´§é¡µé¢æ–‡ä»¶å­˜åœ¨ (delivery.vue)</li>
                <li class="pass">è·¯ç”±é…ç½®æ­£ç¡® (/order/delivery/:id)</li>
                <li class="pass">ä»£ç æ— è¯­æ³•é”™è¯¯</li>
            </ul>
        </div>

        <!-- å¸¸è§é—®é¢˜æ’æŸ¥ -->
        <div class="section">
            <div class="section-title">ğŸ” å¦‚æœè¿˜æ˜¯ä¸å·¥ä½œï¼Œè¯·æ£€æŸ¥:</div>
            
            <table>
                <thead>
                    <tr>
                        <th>æ£€æŸ¥é¡¹</th>
                        <th>æ£€æŸ¥æ–¹æ³•</th>
                        <th>è§£å†³æ–¹æ¡ˆ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>1. è®¢å•çŠ¶æ€</strong></td>
                        <td>ç¡®è®¤è®¢å•çš„ <code>status</code> æ˜¯ 'completed' ä¸” <code>deliveryStatus</code> æ˜¯ 'pending'</td>
                        <td>åœ¨æ§åˆ¶å°æ‰§è¡Œ:<br><code>const orders = JSON.parse(localStorage.getItem('orderList'))<br>console.log(orders)</code></td>
                    </tr>
                    <tr>
                        <td><strong>2. æŒ‰é’®æ˜¾ç¤º</strong></td>
                        <td>ç¡®è®¤"å‘è´§"æŒ‰é’®æ˜¯å¦æ˜¾ç¤º</td>
                        <td>æ£€æŸ¥ <code>v-if="row.deliveryStatus === 'pending'"</code> æ¡ä»¶</td>
                    </tr>
                    <tr>
                        <td><strong>3. æ§åˆ¶å°é”™è¯¯</strong></td>
                        <td>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·(F12)æŸ¥çœ‹æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯</td>
                        <td>æ ¹æ®é”™è¯¯ä¿¡æ¯è¿›è¡Œä¿®å¤</td>
                    </tr>
                    <tr>
                        <td><strong>4. æƒé™é—®é¢˜</strong></td>
                        <td>ç¡®è®¤å½“å‰ç™»å½•ç”¨æˆ·æ˜¯ä»£ç†æˆ–ç®¡ç†å‘˜</td>
                        <td>å‘è´§åŠŸèƒ½ä»…å¯¹ä»£ç†å’Œç®¡ç†å‘˜å¼€æ”¾</td>
                    </tr>
                    <tr>
                        <td><strong>5. è·¯ç”±é…ç½®</strong></td>
                        <td>ç¡®è®¤è·¯ç”±é…ç½®æ­£ç¡®</td>
                        <td>æ£€æŸ¥ <code>router/index.js</code> ä¸­æ˜¯å¦æœ‰ delivery è·¯ç”±</td>
                    </tr>
                    <tr>
                        <td><strong>6. æ–‡ä»¶æ˜¯å¦å­˜åœ¨</strong></td>
                        <td>ç¡®è®¤ delivery.vue æ–‡ä»¶å­˜åœ¨</td>
                        <td>æ£€æŸ¥ <code>src/views/order/delivery.vue</code></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- è°ƒè¯•å‘½ä»¤ -->
        <div class="section">
            <div class="section-title">ğŸ› ï¸ è°ƒè¯•å‘½ä»¤</div>
            
            <h4>1. æŸ¥çœ‹æ‰€æœ‰è®¢å•</h4>
            <div class="code-block">
<pre>const orders = JSON.parse(localStorage.getItem('orderList') || '[]')
console.log('æ€»è®¢å•æ•°:', orders.length)
console.table(orders)</pre>
            </div>

            <h4 style="margin-top: 15px;">2. æŸ¥çœ‹å¾…å‘è´§è®¢å•</h4>
            <div class="code-block">
<pre>const orders = JSON.parse(localStorage.getItem('orderList') || '[]')
const pendingDelivery = orders.filter(o => 
  o.status === 'completed' && o.deliveryStatus === 'pending'
)
console.log('å¾…å‘è´§è®¢å•:', pendingDelivery)
console.table(pendingDelivery)</pre>
            </div>

            <h4 style="margin-top: 15px;">3. æ¸…ç©ºæµ‹è¯•æ•°æ®</h4>
            <div class="code-block">
<pre>// è°¨æ…ä½¿ç”¨ï¼ä¼šåˆ é™¤æ‰€æœ‰è®¢å•
localStorage.removeItem('orderList')
console.log('âœ… æ‰€æœ‰è®¢å•å·²æ¸…ç©º')
location.reload()</pre>
            </div>
        </div>

        <!-- é¢„æœŸæ•ˆæœ -->
        <div class="section">
            <div class="section-title">ğŸ¯ é¢„æœŸæ•ˆæœæ¼”ç¤º</div>
            
            <div class="info-box">
                <strong>ç‚¹å‡»å‘è´§æŒ‰é’®å:</strong>
                <ol style="margin: 10px 0 0 20px;">
                    <li>æµè§ˆå™¨æ§åˆ¶å°è¾“å‡º: <code style="color: #409eff;">ğŸš€ è·³è½¬åˆ°å‘è´§é¡µé¢ï¼Œè®¢å•ID: 1</code></li>
                    <li>é¡µé¢URLå˜ä¸º: <code>/order/delivery/1</code></li>
                    <li>æ˜¾ç¤ºå‘è´§é¡µé¢ï¼ŒåŒ…å«:
                        <ul style="margin-top: 5px;">
                            <li>ğŸ“Š æ•°æ®åŸºæœ¬ä¿¡æ¯</li>
                            <li>ğŸ‘¤ å®¢æˆ·åŸºæœ¬ä¿¡æ¯</li>
                            <li>ğŸ“§ å‘è´§æ–¹å¼é€‰æ‹©(é‚®ç®±/TGbot)</li>
                            <li>âœ… ç¡®è®¤å‘è´§æŒ‰é’®</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <!-- å¿«é€Ÿæ“ä½œ -->
        <div class="section">
            <div class="section-title">âš¡ å¿«é€Ÿæ“ä½œ</div>
            
            <button class="btn btn-success" onclick="createTestOrder()">
                åˆ›å»ºæµ‹è¯•è®¢å•
            </button>
            <button class="btn btn-primary" onclick="viewOrders()">
                æŸ¥çœ‹æ‰€æœ‰è®¢å•
            </button>
            <button class="btn btn-warning" onclick="viewPendingDelivery()">
                æŸ¥çœ‹å¾…å‘è´§è®¢å•
            </button>
            <button class="btn btn-danger" onclick="clearOrders()">
                æ¸…ç©ºæµ‹è¯•æ•°æ®
            </button>

            <div id="result" class="test-result"></div>
        </div>

        <!-- æŠ€æœ¯ç»†èŠ‚ -->
        <div class="section">
            <div class="section-title">ğŸ“– æŠ€æœ¯ç»†èŠ‚</div>
            
            <h4>handleDeliver æ–¹æ³•ä½ç½®:</h4>
            <p><code>/src/views/order/completed.vue</code> æ–‡ä»¶çš„ <code>methods</code> éƒ¨åˆ†</p>

            <h4 style="margin-top: 15px;">å®Œæ•´æ–¹æ³•ä»£ç :</h4>
            <div class="code-block">
<pre>methods: {
  // ... å…¶ä»–æ–¹æ³• ...
  
  handleDeliver(row) {
    // è·³è½¬åˆ°å‘è´§é¡µé¢
    console.log('ğŸš€ è·³è½¬åˆ°å‘è´§é¡µé¢ï¼Œè®¢å•ID:', row.id)
    this.$router.push({
      path: `/order/delivery/${row.id}`
    })
  },
  
  // ... å…¶ä»–æ–¹æ³• ...
}</pre>
            </div>

            <h4 style="margin-top: 15px;">æŒ‰é’®ç»‘å®š:</h4>
            <div class="code-block">
<pre>&lt;el-button
  v-if="row.deliveryStatus === 'pending'"
  type="success"
  size="mini"
  @click="handleDeliver(row)"
&gt;
  å‘è´§
&lt;/el-button&gt;</pre>
            </div>
        </div>

        <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
            <p style="color: #666;">âœ… é—®é¢˜å·²ä¿®å¤ï¼Œè¯·æŒ‰ç…§æµ‹è¯•æ­¥éª¤éªŒè¯åŠŸèƒ½ï¼</p>
            <p style="color: #999; font-size: 12px; margin-top: 10px;">å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°çš„æ—¥å¿—è¾“å‡º</p>
        </div>
    </div>

    <script>
        function createTestOrder() {
            try {
                const orders = JSON.parse(localStorage.getItem('orderList') || '[]')
                
                const testOrder = {
                    id: orders.length + 1,
                    orderNo: 'ORD' + Date.now() + Math.random().toString(36).substr(2, 4).toUpperCase(),
                    customerName: 'æµ‹è¯•å®¢æˆ·',
                    country: 'å­ŸåŠ æ‹‰å›½',
                    validity: '3',
                    source: 'å…¬å¼€æ•°æ®',
                    quantity: 10000,
                    operators: [
                        { name: 'Grameenphone', count: 4000 },
                        { name: 'Robi', count: 3000 },
                        { name: 'Banglalink', count: 2000 },
                        { name: 'Teletalk', count: 1000 }
                    ],
                    totalAmount: '50.00',
                    deliveryEmail: 'test@example.com',
                    status: 'completed',
                    deliveryStatus: 'pending',
                    createTime: Date.now(),
                    reviewTime: Date.now(),
                    approveTime: Date.now(),
                    remark: 'æµ‹è¯•è®¢å•'
                }
                
                orders.push(testOrder)
                localStorage.setItem('orderList', JSON.stringify(orders))
                
                showResult('success', `âœ… æµ‹è¯•è®¢å•åˆ›å»ºæˆåŠŸï¼<br>è®¢å•å·: ${testOrder.orderNo}<br>è®¢å•ID: ${testOrder.id}<br><br>è¯·è®¿é—® <a href="http://localhost:9528/#/order/completed" target="_blank" style="color: #409eff;">å·²å®Œæˆè®¢å•é¡µé¢</a> æŸ¥çœ‹`)
            } catch (e) {
                showResult('error', 'âŒ åˆ›å»ºå¤±è´¥: ' + e.message)
            }
        }

        function viewOrders() {
            try {
                const orders = JSON.parse(localStorage.getItem('orderList') || '[]')
                const html = `
                    <strong>æ€»è®¢å•æ•°: ${orders.length}</strong><br><br>
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <th style="border: 1px solid #ddd; padding: 8px;">ID</th>
                            <th style="border: 1px solid #ddd; padding: 8px;">è®¢å•å·</th>
                            <th style="border: 1px solid #ddd; padding: 8px;">çŠ¶æ€</th>
                            <th style="border: 1px solid #ddd; padding: 8px;">å‘è´§çŠ¶æ€</th>
                        </tr>
                        ${orders.map(o => `
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">${o.id}</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">${o.orderNo}</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">${o.status}</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">${o.deliveryStatus || 'N/A'}</td>
                            </tr>
                        `).join('')}
                    </table>
                `
                showResult('info', html)
            } catch (e) {
                showResult('error', 'âŒ æŸ¥çœ‹å¤±è´¥: ' + e.message)
            }
        }

        function viewPendingDelivery() {
            try {
                const orders = JSON.parse(localStorage.getItem('orderList') || '[]')
                const pendingDelivery = orders.filter(o => 
                    o.status === 'completed' && o.deliveryStatus === 'pending'
                )
                
                if (pendingDelivery.length === 0) {
                    showResult('warning', 'âš ï¸ æ²¡æœ‰å¾…å‘è´§è®¢å•<br><br>è¯·å…ˆåˆ›å»ºæµ‹è¯•è®¢å•')
                    return
                }
                
                const html = `
                    <strong>å¾…å‘è´§è®¢å•: ${pendingDelivery.length} æ¡</strong><br><br>
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <th style="border: 1px solid #ddd; padding: 8px;">ID</th>
                            <th style="border: 1px solid #ddd; padding: 8px;">è®¢å•å·</th>
                            <th style="border: 1px solid #ddd; padding: 8px;">å®¢æˆ·</th>
                            <th style="border: 1px solid #ddd; padding: 8px;">é‡‘é¢</th>
                        </tr>
                        ${pendingDelivery.map(o => `
                            <tr>
                                <td style="border: 1px solid #ddd; padding: 8px;">${o.id}</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">${o.orderNo}</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">${o.customerName}</td>
                                <td style="border: 1px solid #ddd; padding: 8px;">${o.totalAmount} U</td>
                            </tr>
                        `).join('')}
                    </table>
                `
                showResult('success', html)
            } catch (e) {
                showResult('error', 'âŒ æŸ¥çœ‹å¤±è´¥: ' + e.message)
            }
        }

        function clearOrders() {
            if (confirm('ç¡®è®¤æ¸…ç©ºæ‰€æœ‰è®¢å•æ•°æ®ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼')) {
                localStorage.removeItem('orderList')
                showResult('success', 'âœ… æ‰€æœ‰è®¢å•å·²æ¸…ç©º')
            }
        }

        function showResult(type, message) {
            const resultDiv = document.getElementById('result')
            const classMap = {
                success: 'success-box',
                error: 'error-box',
                warning: 'warning-box',
                info: 'info-box'
            }
            resultDiv.className = `test-result ${classMap[type]}`
            resultDiv.innerHTML = message
            resultDiv.style.display = 'block'
        }
    </script>
</body>
</html>

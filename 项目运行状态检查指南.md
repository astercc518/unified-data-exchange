# Vue Element Admin 项目运行状态检查指南

## 📋 概述

本文档说明如何检查和启动 Vue Element Admin 项目。

## 🚀 快速启动

### 方式一：使用一键启动脚本（推荐）

```bash
cd /home/vue-element-admin
chmod +x start-project.sh
./start-project.sh
```

### 方式二：手动启动

#### 1. 启动后端服务

```bash
cd /home/vue-element-admin/backend
node server.js
```

或后台运行：
```bash
cd /home/vue-element-admin/backend
nohup node server.js > /tmp/backend.log 2>&1 &
```

#### 2. 启动前端服务

```bash
cd /home/vue-element-admin
npm run dev
```

或后台运行：
```bash
cd /home/vue-element-admin
nohup npm run dev > /tmp/frontend.log 2>&1 &
```

## 🔍 状态检查

### 使用状态检查脚本

```bash
cd /home/vue-element-admin
chmod +x check-status.sh
./check-status.sh
```

### 手动检查

#### 1. 检查后端服务（端口 3000）

```bash
# 检查端口占用
netstat -tlnp | grep :3000

# 检查健康状态
curl http://localhost:3000/health

# 检查后端进程
ps aux | grep "node.*server.js"
```

预期响应：
```json
{
  "status": "ok",
  "timestamp": "2025-10-15T...",
  "uptime": 123.456,
  "environment": "development"
}
```

#### 2. 检查前端服务（端口 3001）

```bash
# 检查端口占用
netstat -tlnp | grep :3001

# 检查前端进程
ps aux | grep "vue-cli-service"
```

#### 3. 检查日志

```bash
# 查看后端日志
tail -f /tmp/backend.log

# 查看前端日志
tail -f /tmp/frontend.log
```

## 📊 服务地址

- **前端服务**: http://localhost:3001
- **后端服务**: http://localhost:3000
- **后端健康检查**: http://localhost:3000/health

## 🛑 停止服务

### 停止后端

```bash
pkill -f "node.*backend/server.js"
```

### 停止前端

```bash
pkill -f "vue-cli-service serve"
```

### 停止所有服务

```bash
pkill -f "node.*backend/server.js"
pkill -f "vue-cli-service serve"
```

## 🐛 常见问题

### 1. 端口被占用

**问题**: `Error: listen EADDRINUSE: address already in use :::3000`

**解决方案**:
```bash
# 查找占用端口的进程
netstat -tlnp | grep :3000

# 杀掉进程（替换 PID）
kill -9 <PID>
```

### 2. 数据库连接失败

**问题**: 后端启动失败，日志显示数据库连接错误

**解决方案**:
```bash
# 检查 .env 配置
cat /home/vue-element-admin/backend/.env

# 确认数据库配置正确
# DB_TYPE=mariadb
# DB_HOST=localhost
# DB_PORT=3306
# DB_NAME=vue_admin
# DB_USER=vue_admin_user
# DB_PASSWORD=vue_admin_2024
```

### 3. 前端编译失败

**问题**: 前端启动时报错或白屏

**解决方案**:
```bash
# 清理依赖重新安装
cd /home/vue-element-admin
rm -rf node_modules package-lock.json
npm install

# 清理缓存
npm cache clean --force
```

### 4. Node.js 或 npm 未找到

**问题**: `command not found: node` 或 `command not found: npm`

**解决方案**:
```bash
# 检查 Node.js 安装
which node
node --version

# 检查 npm 安装
which npm
npm --version

# 如果未安装，需要先安装 Node.js (建议 v14 或更高版本)
```

## 📝 最新修改说明

### 国码概念统一（2025-10-15）

**问题**: 之前的代码中"国码"概念混淆
- 错误：将"国码"理解为国家代码（如 MX）
- 正确：国码 = 国际电话区号（如 +52）

**已修改的文件**:
1. `/home/vue-element-admin/src/views/data/processing.vue`
   - 热门国家列表数据结构更新
   - 增加国码对话框绑定值从 `country.code` 改为 `country.dialCode`
   - 一键清洗对话框同样修改
   
2. `/home/vue-element-admin/backend/utils/dataProcessor.js`
   - 更新注释说明 countryCode 参数是国际电话区号
   - 添加方法文档注释

**详细说明**: 参见 `/home/vue-element-admin/数据处理模块-国码概念统一说明.md`

## ✅ 验证修改

启动项目后，测试以下功能：

### 1. 增加国码功能
1. 登录系统
2. 进入"数据处理"模块
3. 选择文件，点击"增加国码"
4. 选择"墨西哥"，应该显示 "墨西哥 (+52)"
5. 处理后数据应该以 "+52" 开头

### 2. 一键清洗功能
1. 选择文件，点击"一键清洗"
2. 选择"墨西哥 (+52)"
3. 勾选"智能处理国码"选项
4. 处理后：
   - 有国码的数据会被去除国码
   - 无国码的数据会添加 +52

## 📞 技术支持

如果遇到问题：

1. 查看日志文件获取详细错误信息
2. 检查网络端口是否被其他程序占用
3. 确认数据库服务正常运行
4. 检查 Node.js 版本兼容性

---

**文档更新日期**: 2025-10-15

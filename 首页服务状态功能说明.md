# é¦–é¡µæœåŠ¡çŠ¶æ€æ˜¾ç¤ºåŠŸèƒ½è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

åœ¨é¦–é¡µDashboardä¸­æ·»åŠ äº†å‰åç«¯è¿è¡ŒçŠ¶æ€çš„å®æ—¶ç›‘æ§æ¨¡å—,è®©ç®¡ç†å‘˜ã€ä»£ç†å’Œå®¢æˆ·èƒ½å¤Ÿéšæ—¶äº†è§£ç³»ç»ŸæœåŠ¡çš„å¥åº·çŠ¶å†µã€‚

## ä¿®æ”¹æ—¥æœŸ
2025-10-13

## åŠŸèƒ½ç‰¹æ€§

### 1. æœåŠ¡ç›‘æ§

#### ç›‘æ§çš„æœåŠ¡
- **å‰ç«¯æœåŠ¡**: Vue.jsåº”ç”¨è¿è¡ŒçŠ¶æ€
- **åç«¯æœåŠ¡**: Node.js APIæœåŠ¡è¿è¡ŒçŠ¶æ€
- **æ•°æ®åº“æœåŠ¡**: MySQL/MariaDBæ•°æ®åº“è¿æ¥çŠ¶æ€

#### ç›‘æ§æŒ‡æ ‡
- âœ… æœåŠ¡çŠ¶æ€(è¿è¡Œä¸­/å·²åœæ­¢/é”™è¯¯)
- âœ… å“åº”æ—¶é—´(æ¯«ç§’)
- âœ… æœåŠ¡ç‰ˆæœ¬
- âœ… ç«¯å£ä¿¡æ¯
- âœ… æ•°æ®åº“åç§°
- âœ… æœ€åæ£€æŸ¥æ—¶é—´
- âœ… æ•´ä½“å¥åº·çŠ¶æ€

### 2. å®æ—¶æ›´æ–°

- **è‡ªåŠ¨åˆ·æ–°**: æ¯30ç§’è‡ªåŠ¨æ£€æŸ¥ä¸€æ¬¡æœåŠ¡çŠ¶æ€
- **æ‰‹åŠ¨åˆ·æ–°**: ç‚¹å‡»"ç«‹å³æ£€æŸ¥"æŒ‰é’®å¯æ‰‹åŠ¨åˆ·æ–°
- **å®æ—¶åé¦ˆ**: æ£€æŸ¥è¿‡ç¨‹ä¸­æ˜¾ç¤ºåŠ è½½åŠ¨ç”»

### 3. çŠ¶æ€æ ‡è¯†

#### æœåŠ¡çŠ¶æ€ç±»å‹
```
è¿è¡Œä¸­ (ç»¿è‰²) - æœåŠ¡æ­£å¸¸è¿è¡Œ
å·²åœæ­¢ (ç°è‰²) - æœåŠ¡æœªå¯åŠ¨æˆ–æ— æ³•è¿æ¥
é”™è¯¯ (çº¢è‰²) - æœåŠ¡å¼‚å¸¸æˆ–å“åº”é”™è¯¯
è­¦å‘Š (é»„è‰²) - æœåŠ¡çŠ¶æ€æœªçŸ¥
```

#### æ•´ä½“å¥åº·çŠ¶æ€
- âœ… å…¨éƒ¨æœåŠ¡æ­£å¸¸ â†’ ç»¿è‰²æç¤º"æœåŠ¡å¥åº·"
- âš ï¸ éƒ¨åˆ†æœåŠ¡å¼‚å¸¸ â†’ é»„è‰²æç¤º"X/3 æœåŠ¡çŠ¶æ€"
- âŒ å…¨éƒ¨æœåŠ¡å¼‚å¸¸ â†’ çº¢è‰²æç¤º"æœåŠ¡å¼‚å¸¸"

### 4. è§†è§‰è®¾è®¡

- **æ¸å˜å›¾æ ‡**: æ¯ä¸ªæœåŠ¡ä½¿ç”¨ç‹¬ç‰¹çš„æ¸å˜è‰²å›¾æ ‡
  - å‰ç«¯æœåŠ¡: ç´«è‰²æ¸å˜
  - åç«¯æœåŠ¡: ç²‰çº¢æ¸å˜
  - æ•°æ®åº“: è“è‰²æ¸å˜
- **æ‚¬åœæ•ˆæœ**: å¡ç‰‡æ‚¬åœæ—¶å¹³æ»‘ç§»åŠ¨
- **å“åº”å¼å¸ƒå±€**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸

## æŠ€æœ¯å®ç°

### ç»„ä»¶æ–‡ä»¶
```
/src/views/dashboard/admin/components/ServiceStatusCard.vue
```

### APIæ¥å£

#### 1. åç«¯å¥åº·æ£€æŸ¥
```http
GET /api/health

Response:
{
  "status": "ok",
  "timestamp": "2025-10-13T12:00:00.000Z",
  "uptime": 3600,
  "environment": "development",
  "version": "v1.0.0"
}
```

#### 2. ç³»ç»Ÿç»Ÿè®¡(å«æ•°æ®åº“ä¿¡æ¯)
```http
GET /api/stats/system

Response:
{
  "success": true,
  "data": {
    "database": "vue_admin",
    "totalUsers": 10,
    "totalAgents": 5,
    ...
  }
}
```

### æ£€æŸ¥é€»è¾‘

```javascript
// å‰ç«¯æœåŠ¡æ£€æŸ¥
// å‰ç«¯å§‹ç»ˆè¿è¡Œä¸­(ä»£ç æ­£åœ¨æ‰§è¡Œ)
services.frontend.status = 'running'

// åç«¯æœåŠ¡æ£€æŸ¥
try {
  await request({ url: '/api/health' })
  services.backend.status = 'running'
} catch {
  services.backend.status = 'stopped'
}

// æ•°æ®åº“æœåŠ¡æ£€æŸ¥
try {
  await request({ url: '/api/stats/system' })
  services.database.status = 'running'
} catch {
  services.database.status = 'error'
}
```

### å®šæ—¶å™¨ç®¡ç†

```javascript
created() {
  this.checkAllServices()
  // æ¯30ç§’è‡ªåŠ¨æ£€æŸ¥ä¸€æ¬¡
  this.checkTimer = setInterval(() => {
    this.checkAllServices(true)
  }, 30000)
}

beforeDestroy() {
  if (this.checkTimer) {
    clearInterval(this.checkTimer)
  }
}
```

## å›½é™…åŒ–æ”¯æŒ

### æ–°å¢çš„å›½é™…åŒ–é”®å€¼

```javascript
// src/lang/index.js
dashboard: {
  // æœåŠ¡çŠ¶æ€ç›¸å…³
  serviceStatus: 'æœåŠ¡çŠ¶æ€',
  frontendService: 'å‰ç«¯æœåŠ¡',
  backendService: 'åç«¯æœåŠ¡',
  databaseService: 'æ•°æ®åº“æœåŠ¡',
  running: 'è¿è¡Œä¸­',
  stopped: 'å·²åœæ­¢',
  responseTime: 'å“åº”æ—¶é—´',
  ms: 'æ¯«ç§’',
  version: 'ç‰ˆæœ¬',
  lastCheck: 'æœ€åæ£€æŸ¥',
  checkNow: 'ç«‹å³æ£€æŸ¥',
  serviceHealthy: 'æœåŠ¡å¥åº·',
  serviceUnhealthy: 'æœåŠ¡å¼‚å¸¸'
}
```

### è‹±æ–‡ç¿»è¯‘å»ºè®®

```javascript
en: {
  dashboard: {
    serviceStatus: 'Service Status',
    frontendService: 'Frontend Service',
    backendService: 'Backend Service',
    databaseService: 'Database Service',
    running: 'Running',
    stopped: 'Stopped',
    responseTime: 'Response Time',
    ms: 'ms',
    version: 'Version',
    lastCheck: 'Last Check',
    checkNow: 'Check Now',
    serviceHealthy: 'Services Healthy',
    serviceUnhealthy: 'Services Unhealthy'
  }
}
```

## é¡µé¢é›†æˆ

### ç®¡ç†å‘˜Dashboard
```vue
<!-- src/views/dashboard/admin/index.vue -->
<el-row :gutter="32">
  <el-col :xs="24" :sm="24" :lg="8">
    <data-distribution-chart />
  </el-col>
  <el-col :xs="24" :sm="24" :lg="8">
    <system-health-card />
  </el-col>
  <el-col :xs="24" :sm="24" :lg="8">
    <service-status-card />
  </el-col>
</el-row>
```

### å®¢æˆ·Dashboard
```vue
<!-- src/views/dashboard/customer.vue -->
<el-row style="margin-top: 20px;">
  <el-col :span="24">
    <service-status-card />
  </el-col>
</el-row>
```

### ä»£ç†Dashboard
```vue
<!-- src/views/dashboard/agent.vue -->
<el-row style="margin-top: 20px;">
  <el-col :span="24">
    <service-status-card />
  </el-col>
</el-row>
```

## ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: ç³»ç»Ÿç®¡ç†å‘˜ç›‘æ§
- æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çš„å®æ—¶çŠ¶æ€
- å¿«é€Ÿå®šä½æ•…éšœæœåŠ¡
- äº†è§£ç³»ç»Ÿå“åº”æ€§èƒ½

### åœºæ™¯2: å®¢æˆ·ä½¿ç”¨å‰æ£€æŸ¥
- ç¡®è®¤æœåŠ¡å¯ç”¨æ€§
- äº†è§£ç³»ç»ŸçŠ¶æ€
- æå‡ç”¨æˆ·ä½“éªŒ

### åœºæ™¯3: æ•…éšœè¯Šæ–­
- æœåŠ¡å¼‚å¸¸æ—¶å¿«é€Ÿå®šä½
- æŸ¥çœ‹æœåŠ¡å“åº”æ—¶é—´
- ååŠ©æŠ€æœ¯æ”¯æŒ

## æµ‹è¯•æ­¥éª¤

### 1. æ­£å¸¸çŠ¶æ€æµ‹è¯•

```bash
# å¯åŠ¨åç«¯æœåŠ¡
cd backend
npm start

# å¯åŠ¨å‰ç«¯æœåŠ¡
npm run dev

# è®¿é—®é¦–é¡µ
http://localhost:9528
```

**é¢„æœŸç»“æœ**:
- âœ… å‰ç«¯æœåŠ¡: è¿è¡Œä¸­ (ç»¿è‰²)
- âœ… åç«¯æœåŠ¡: è¿è¡Œä¸­ (ç»¿è‰²)
- âœ… æ•°æ®åº“æœåŠ¡: è¿è¡Œä¸­ (ç»¿è‰²)
- âœ… æ•´ä½“çŠ¶æ€: æœåŠ¡å¥åº· (ç»¿è‰²)

### 2. åç«¯åœæ­¢æµ‹è¯•

```bash
# åœæ­¢åç«¯æœåŠ¡
# Ctrl+C åœ¨åç«¯terminal

# åˆ·æ–°é¦–é¡µæˆ–ç­‰å¾…30ç§’
```

**é¢„æœŸç»“æœ**:
- âœ… å‰ç«¯æœåŠ¡: è¿è¡Œä¸­ (ç»¿è‰²)
- âŒ åç«¯æœåŠ¡: å·²åœæ­¢ (ç°è‰²)
- âŒ æ•°æ®åº“æœåŠ¡: å·²åœæ­¢ (ç°è‰²)
- âš ï¸ æ•´ä½“çŠ¶æ€: 1/3 æœåŠ¡çŠ¶æ€ (é»„è‰²)

### 3. æ‰‹åŠ¨åˆ·æ–°æµ‹è¯•

```
1. ç‚¹å‡»"ç«‹å³æ£€æŸ¥"æŒ‰é’®
2. è§‚å¯ŸåŠ è½½åŠ¨ç”»
3. æŸ¥çœ‹çŠ¶æ€æ›´æ–°
```

**é¢„æœŸç»“æœ**:
- âœ… æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
- âœ… æ›´æ–°æœåŠ¡çŠ¶æ€
- âœ… æ›´æ–°æœ€åæ£€æŸ¥æ—¶é—´
- âœ… æ˜¾ç¤ºåˆ·æ–°æˆåŠŸæç¤º

## æ€§èƒ½ä¼˜åŒ–

### 1. é™é»˜åˆ·æ–°
```javascript
// è‡ªåŠ¨åˆ·æ–°æ—¶ä¸æ˜¾ç¤ºåŠ è½½åŠ¨ç”»å’Œæç¤º
checkAllServices(true)  // silent = true
```

### 2. è¶…æ—¶æ§åˆ¶
```javascript
// APIè¯·æ±‚è¶…æ—¶æ—¶é—´: 5ç§’
timeout: 5000
```

### 3. é”™è¯¯å¤„ç†
```javascript
// æ•è·é”™è¯¯,é˜²æ­¢é¡µé¢å´©æºƒ
try {
  await checkService()
} catch (error) {
  console.warn('æœåŠ¡æ£€æŸ¥å¤±è´¥:', error.message)
  service.status = 'stopped'
}
```

## æ³¨æ„äº‹é¡¹

### 1. åç«¯ä¾èµ–
- éœ€è¦åç«¯æä¾› `/api/health` æ¥å£
- éœ€è¦åç«¯æä¾› `/api/stats/system` æ¥å£
- ç¡®ä¿CORSé…ç½®æ­£ç¡®

### 2. ç½‘ç»œè¦æ±‚
- éœ€è¦å‰ç«¯èƒ½è®¿é—®åç«¯API
- å»ºè®®é…ç½®ä»£ç†æˆ–ä½¿ç”¨åŒæºç­–ç•¥

### 3. æƒé™æ§åˆ¶
- æ‰€æœ‰ç”¨æˆ·è§’è‰²éƒ½å¯ä»¥æŸ¥çœ‹æœåŠ¡çŠ¶æ€
- ä¸åŒ…å«æ•æ„Ÿä¿¡æ¯,æ— éœ€ç‰¹æ®Šæƒé™

### 4. æµè§ˆå™¨å…¼å®¹
- æ”¯æŒç°ä»£æµè§ˆå™¨
- ä½¿ç”¨ES6+è¯­æ³•
- éœ€è¦Promiseæ”¯æŒ

## æ ·å¼å®šåˆ¶

### ä¿®æ”¹æ¸å˜è‰²

```scss
.service-icon {
  &.frontend {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  &.backend {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
  }
  
  &.database {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
  }
}
```

### ä¿®æ”¹åˆ·æ–°é—´éš”

```javascript
// ä¿®æ”¹ä¸º60ç§’(1åˆ†é’Ÿ)
this.checkTimer = setInterval(() => {
  this.checkAllServices(true)
}, 60000)  // æ”¹ä¸º60000
```

## æœªæ¥ä¼˜åŒ–æ–¹å‘

### çŸ­æœŸä¼˜åŒ–
1. âš ï¸ æ·»åŠ æœåŠ¡è¯¦ç»†ä¿¡æ¯å±•å¼€é¢æ¿
2. âš ï¸ æ”¯æŒæœåŠ¡é‡å¯æ“ä½œ(ç®¡ç†å‘˜)
3. âš ï¸ æ·»åŠ æœåŠ¡æ—¥å¿—æŸ¥çœ‹
4. âš ï¸ å†å²çŠ¶æ€è¶‹åŠ¿å›¾

### ä¸­æœŸä¼˜åŒ–
1. ğŸ“‹ WebSocketå®æ—¶æ¨é€çŠ¶æ€
2. ğŸ“‹ æœåŠ¡å¼‚å¸¸å‘Šè­¦é€šçŸ¥
3. ğŸ“‹ æ€§èƒ½æŒ‡æ ‡ç›‘æ§(CPU/å†…å­˜)
4. ğŸ“‹ æœåŠ¡ä¾èµ–å…³ç³»å›¾

### é•¿æœŸä¼˜åŒ–
1. ğŸ”® åˆ†å¸ƒå¼æœåŠ¡ç›‘æ§
2. ğŸ”® è‡ªåŠ¨æ•…éšœæ¢å¤
3. ğŸ”® AIå¼‚å¸¸é¢„æµ‹
4. ğŸ”® å®Œæ•´çš„APMç³»ç»Ÿ

## ç›¸å…³æ–‡æ¡£

1. [Dashboardè§„èŒƒ](./é¦–é¡µæ•°æ®å±•ç¤ºè§„èŒƒ.md)
2. [å›½é™…åŒ–æŒ‡å—](./å›½é™…åŒ–å®æ–½è§„èŒƒ.md)
3. [ç»„ä»¶å¼€å‘è§„èŒƒ](./ç»„ä»¶è®¾è®¡è§„èŒƒ.md)

## æ€»ç»“

âœ… **åŠŸèƒ½å®Œæ•´**: å‰åç«¯åŠæ•°æ®åº“çŠ¶æ€ç›‘æ§
âœ… **å®æ—¶æ›´æ–°**: è‡ªåŠ¨å’Œæ‰‹åŠ¨åˆ·æ–°æ”¯æŒ
âœ… **å›½é™…åŒ–**: å®Œæ•´çš„å¤šè¯­è¨€æ”¯æŒ
âœ… **å“åº”å¼**: é€‚é…å„ç§å±å¹•å°ºå¯¸
âœ… **ç”¨æˆ·å‹å¥½**: ç›´è§‚çš„è§†è§‰åé¦ˆ
âœ… **æ€§èƒ½ä¼˜åŒ–**: åˆç†çš„åˆ·æ–°é—´éš”å’Œé”™è¯¯å¤„ç†

---

**åŠŸèƒ½å¼€å‘å®Œæˆæ—¶é—´**: 2025-10-13
**æµ‹è¯•çŠ¶æ€**: âš ï¸ å¾…æµ‹è¯•
**æ–‡æ¡£çŠ¶æ€**: âœ… å®Œæˆ

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾åƒéªŒè¯ç åŠŸèƒ½æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f5f7fa;
            border-radius: 8px;
        }

        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #409eff;
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 4px solid #409eff;
        }

        .demo-box {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .captcha-demo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .captcha-demo input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #dcdfe6;
            border-radius: 4px;
            font-size: 14px;
        }

        .captcha-demo img {
            height: 40px;
            cursor: pointer;
            border-radius: 4px;
            border: 1px solid #dcdfe6;
            transition: all 0.3s;
        }

        .captcha-demo img:hover {
            opacity: 0.8;
            transform: scale(1.05);
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
            margin: 5px;
        }

        .btn-primary {
            background: #409eff;
            color: white;
        }

        .btn-primary:hover {
            background: #66b1ff;
        }

        .btn-success {
            background: #67c23a;
            color: white;
        }

        .btn-success:hover {
            background: #85ce61;
        }

        .btn-warning {
            background: #e6a23c;
            color: white;
        }

        .btn-info {
            background: #909399;
            color: white;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #409eff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .success-box {
            background: #e8f5e9;
            border-left: 4px solid #67c23a;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .warning-box {
            background: #fff7e6;
            border-left: 4px solid #e6a23c;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 10px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background: #409eff;
            color: white;
            font-weight: bold;
        }

        tr:nth-child(even) {
            background: #f9f9f9;
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 10px;
            margin: 8px 0;
            background: white;
            border-radius: 4px;
            border-left: 4px solid #67c23a;
        }

        .feature-list li::before {
            content: 'âœ“';
            margin-right: 10px;
            color: #67c23a;
            font-weight: bold;
        }

        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 4px;
            display: none;
        }

        .result.show {
            display: block;
        }

        .result.success {
            background: #e8f5e9;
            color: #67c23a;
            border: 1px solid #67c23a;
        }

        .result.error {
            background: #fef0f0;
            color: #f56c6c;
            border: 1px solid #f56c6c;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” å›¾åƒéªŒè¯ç åŠŸèƒ½æµ‹è¯•</h1>
        <div class="subtitle">ç™»å½•ç•Œé¢å›¾åƒéªŒè¯ç åŠŸèƒ½æ¼”ç¤ºä¸æµ‹è¯•</div>

        <!-- åŠŸèƒ½è¯´æ˜ -->
        <div class="section">
            <div class="section-title">âœ¨ åŠŸèƒ½ç‰¹æ€§</div>
            <ul class="feature-list">
                <li>éšæœºç”Ÿæˆ4ä½å­—æ¯æ•°å­—ç»„åˆéªŒè¯ç </li>
                <li>éªŒè¯ç å›¾ç‰‡åŒ…å«å¹²æ‰°çº¿å’Œå¹²æ‰°ç‚¹ï¼Œæé«˜å®‰å…¨æ€§</li>
                <li>æ–‡å­—éšæœºé¢œè‰²ã€å¤§å°ã€è§’åº¦å’Œä½ç½®ï¼Œé˜²æ­¢æœºå™¨è¯†åˆ«</li>
                <li>ç‚¹å‡»éªŒè¯ç å›¾ç‰‡å¯åˆ·æ–°</li>
                <li>éªŒè¯ç ä¸åŒºåˆ†å¤§å°å†™</li>
                <li>ç™»å½•å¤±è´¥æˆ–éªŒè¯å¤±è´¥åè‡ªåŠ¨åˆ·æ–°éªŒè¯ç </li>
                <li>æ”¯æŒä¸­è‹±æ–‡åŒè¯­æç¤º</li>
            </ul>
        </div>

        <!-- åœ¨çº¿æ¼”ç¤º -->
        <div class="section">
            <div class="section-title">ğŸ® åœ¨çº¿æ¼”ç¤º</div>
            <div class="demo-box">
                <h4 style="margin-bottom: 20px;">éªŒè¯ç æµ‹è¯•</h4>
                <div class="captcha-demo">
                    <input type="text" id="captchaInput" placeholder="è¯·è¾“å…¥éªŒè¯ç " maxlength="4">
                    <img id="captchaImage" alt="éªŒè¯ç " title="ç‚¹å‡»åˆ·æ–°">
                    <button class="btn btn-primary" onclick="refreshCaptcha()">åˆ·æ–°</button>
                    <button class="btn btn-success" onclick="verifyCaptcha()">éªŒè¯</button>
                </div>
                <div id="result" class="result"></div>
                <div class="info-box">
                    <strong>ğŸ’¡ æç¤º:</strong> éªŒè¯ç ä¸åŒºåˆ†å¤§å°å†™ï¼Œç‚¹å‡»å›¾ç‰‡æˆ–åˆ·æ–°æŒ‰é’®å¯ä»¥æ›´æ¢éªŒè¯ç 
                </div>
            </div>
        </div>

        <!-- å®ç°åŸç† -->
        <div class="section">
            <div class="section-title">âš™ï¸ å®ç°åŸç†</div>
            
            <h4 style="margin-top: 20px;">1. éªŒè¯ç ç”Ÿæˆ</h4>
            <div class="code-block">
<pre>// ç”ŸæˆéšæœºéªŒè¯ç æ–‡æœ¬
function generateCaptchaText(length = 4) {
  const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789'
  let text = ''
  for (let i = 0; i < length; i++) {
    text += chars.charAt(Math.floor(Math.random() * chars.length))
  }
  return text
}</pre>
            </div>

            <h4 style="margin-top: 20px;">2. Canvasç»˜åˆ¶</h4>
            <div class="code-block">
<pre>// ç»˜åˆ¶éªŒè¯ç å›¾ç‰‡
function drawCaptcha(text, width = 120, height = 40) {
  const canvas = document.createElement('canvas')
  const ctx = canvas.getContext('2d')
  
  // 1. ç»˜åˆ¶èƒŒæ™¯
  // 2. ç»˜åˆ¶å¹²æ‰°çº¿
  // 3. ç»˜åˆ¶å¹²æ‰°ç‚¹
  // 4. ç»˜åˆ¶éªŒè¯ç æ–‡å­—ï¼ˆéšæœºé¢œè‰²ã€å¤§å°ã€è§’åº¦ï¼‰
  
  return canvas.toDataURL('image/png')
}</pre>
            </div>

            <h4 style="margin-top: 20px;">3. éªŒè¯é€»è¾‘</h4>
            <div class="code-block">
<pre>// éªŒè¯éªŒè¯ç ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰
function verifyCaptcha(input, correct) {
  return input.toUpperCase() === correct.toUpperCase()
}</pre>
            </div>
        </div>

        <!-- ä½¿ç”¨è¯´æ˜ -->
        <div class="section">
            <div class="section-title">ğŸ“– ä½¿ç”¨è¯´æ˜</div>
            
            <h4>åœ¨ç™»å½•é¡µé¢ä¸­çš„é›†æˆ</h4>
            <div class="info-box">
                <strong>æ–‡ä»¶ä½ç½®:</strong>
                <ul style="margin-top: 10px; margin-left: 20px;">
                    <li><code>/src/utils/captcha.js</code> - éªŒè¯ç ç”Ÿæˆå·¥å…·</li>
                    <li><code>/src/views/login/index.vue</code> - ç™»å½•é¡µé¢</li>
                    <li><code>/src/views/login/lang.js</code> - å¤šè¯­è¨€é…ç½®</li>
                    <li><code>/src/icons/svg/validCode.svg</code> - éªŒè¯ç å›¾æ ‡</li>
                </ul>
            </div>

            <h4 style="margin-top: 20px;">ç™»å½•è¡¨å•ç»“æ„</h4>
            <div class="code-block">
<pre>&lt;el-form-item prop="captcha"&gt;
  &lt;span class="svg-container"&gt;
    &lt;svg-icon icon-class="validCode" /&gt;
  &lt;/span&gt;
  &lt;el-input
    v-model="loginForm.captcha"
    placeholder="è¯·è¾“å…¥éªŒè¯ç "
    style="width: 60%;"
  /&gt;
  &lt;div class="captcha-image" @click="refreshCaptcha"&gt;
    &lt;img :src="captchaImage" alt="éªŒè¯ç "&gt;
  &lt;/div&gt;
&lt;/el-form-item&gt;</pre>
            </div>
        </div>

        <!-- æµ‹è¯•æ­¥éª¤ -->
        <div class="section">
            <div class="section-title">ğŸ§ª æµ‹è¯•æ­¥éª¤</div>
            
            <h4>æ­¥éª¤1: å¯åŠ¨é¡¹ç›®</h4>
            <div class="code-block">
<pre>cd /home/vue-element-admin
npm run dev</pre>
            </div>

            <h4 style="margin-top: 20px;">æ­¥éª¤2: è®¿é—®ç™»å½•é¡µé¢</h4>
            <div class="info-box">
                è®¿é—®: <a href="http://localhost:9528/#/login" target="_blank">http://localhost:9528/#/login</a>
            </div>

            <h4 style="margin-top: 20px;">æ­¥éª¤3: æµ‹è¯•éªŒè¯ç åŠŸèƒ½</h4>
            <table>
                <thead>
                    <tr>
                        <th>æµ‹è¯•é¡¹</th>
                        <th>æ“ä½œ</th>
                        <th>é¢„æœŸç»“æœ</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>éªŒè¯ç æ˜¾ç¤º</strong></td>
                        <td>æ‰“å¼€ç™»å½•é¡µé¢</td>
                        <td>è‡ªåŠ¨æ˜¾ç¤ºéªŒè¯ç å›¾ç‰‡</td>
                    </tr>
                    <tr>
                        <td><strong>åˆ·æ–°éªŒè¯ç </strong></td>
                        <td>ç‚¹å‡»éªŒè¯ç å›¾ç‰‡</td>
                        <td>éªŒè¯ç å›¾ç‰‡æ›´æ¢ï¼Œæ§åˆ¶å°æ˜¾ç¤ºæ–°éªŒè¯ç </td>
                    </tr>
                    <tr>
                        <td><strong>ä¸è¾“å…¥éªŒè¯ç </strong></td>
                        <td>ç‚¹å‡»ç™»å½•</td>
                        <td>æç¤º"è¯·è¾“å…¥éªŒè¯ç "</td>
                    </tr>
                    <tr>
                        <td><strong>è¾“å…¥é”™è¯¯éªŒè¯ç </strong></td>
                        <td>è¾“å…¥é”™è¯¯çš„éªŒè¯ç å¹¶ç™»å½•</td>
                        <td>æç¤º"éªŒè¯ç é”™è¯¯"ï¼ŒéªŒè¯ç è‡ªåŠ¨åˆ·æ–°</td>
                    </tr>
                    <tr>
                        <td><strong>è¾“å…¥æ­£ç¡®éªŒè¯ç </strong></td>
                        <td>è¾“å…¥æ­£ç¡®çš„éªŒè¯ç å¹¶ç™»å½•</td>
                        <td>éªŒè¯é€šè¿‡ï¼Œè¿›å…¥ç³»ç»Ÿï¼ˆç”¨æˆ·åå¯†ç æ­£ç¡®çš„æƒ…å†µä¸‹ï¼‰</td>
                    </tr>
                    <tr>
                        <td><strong>å¤§å°å†™ä¸æ•æ„Ÿ</strong></td>
                        <td>è¾“å…¥å°å†™éªŒè¯ç </td>
                        <td>éªŒè¯é€šè¿‡</td>
                    </tr>
                    <tr>
                        <td><strong>å¤šè¯­è¨€æ”¯æŒ</strong></td>
                        <td>åˆ‡æ¢è¯­è¨€</td>
                        <td>éªŒè¯ç æç¤ºæ–‡å­—éšè¯­è¨€åˆ‡æ¢</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- å®‰å…¨ç‰¹æ€§ -->
        <div class="section">
            <div class="section-title">ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§</div>
            <ul class="feature-list">
                <li>æ’é™¤æ˜“æ··æ·†å­—ç¬¦ï¼ˆI, O, 0, 1ï¼‰ï¼Œæé«˜ç”¨æˆ·ä½“éªŒ</li>
                <li>éšæœºæ–‡å­—é¢œè‰²ã€å¤§å°ã€ä½ç½®å’Œæ—‹è½¬è§’åº¦ï¼Œé˜²æ­¢OCRè¯†åˆ«</li>
                <li>æ·»åŠ å¹²æ‰°çº¿å’Œå¹²æ‰°ç‚¹ï¼Œå¢åŠ æœºå™¨è¯†åˆ«éš¾åº¦</li>
                <li>æ¯æ¬¡ç™»å½•å¤±è´¥åè‡ªåŠ¨åˆ·æ–°éªŒè¯ç </li>
                <li>éªŒè¯ç ä»…åœ¨å‰ç«¯éªŒè¯ï¼ˆå¦‚éœ€æ›´é«˜å®‰å…¨æ€§ï¼Œå»ºè®®åç«¯éªŒè¯ï¼‰</li>
            </ul>
        </div>

        <!-- APIæ–‡æ¡£ -->
        <div class="section">
            <div class="section-title">ğŸ“š APIæ–‡æ¡£</div>
            
            <h4>éªŒè¯ç å·¥å…·å‡½æ•°</h4>
            <table>
                <thead>
                    <tr>
                        <th>å‡½æ•°å</th>
                        <th>å‚æ•°</th>
                        <th>è¿”å›å€¼</th>
                        <th>è¯´æ˜</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>generateCaptchaText</code></td>
                        <td>length (é»˜è®¤4)</td>
                        <td>string</td>
                        <td>ç”ŸæˆéšæœºéªŒè¯ç æ–‡æœ¬</td>
                    </tr>
                    <tr>
                        <td><code>drawCaptcha</code></td>
                        <td>text, width, height</td>
                        <td>string (base64)</td>
                        <td>ç»˜åˆ¶éªŒè¯ç å›¾ç‰‡</td>
                    </tr>
                    <tr>
                        <td><code>createCaptcha</code></td>
                        <td>length, width, height</td>
                        <td>object {text, image}</td>
                        <td>åˆ›å»ºéªŒè¯ç å¯¹è±¡</td>
                    </tr>
                    <tr>
                        <td><code>verifyCaptcha</code></td>
                        <td>input, correct</td>
                        <td>boolean</td>
                        <td>éªŒè¯éªŒè¯ç </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- å¸¸è§é—®é¢˜ -->
        <div class="section">
            <div class="section-title">â“ å¸¸è§é—®é¢˜</div>
            
            <h4>Q: éªŒè¯ç çœ‹ä¸æ¸…æ€ä¹ˆåŠï¼Ÿ</h4>
            <div class="success-box">
                <strong>A:</strong> ç‚¹å‡»éªŒè¯ç å›¾ç‰‡å³å¯åˆ·æ–°ï¼Œè·å–æ–°çš„éªŒè¯ç 
            </div>

            <h4 style="margin-top: 15px;">Q: éªŒè¯ç åŒºåˆ†å¤§å°å†™å—ï¼Ÿ</h4>
            <div class="success-box">
                <strong>A:</strong> ä¸åŒºåˆ†ï¼Œè¾“å…¥å¤§å†™æˆ–å°å†™éƒ½å¯ä»¥é€šè¿‡éªŒè¯
            </div>

            <h4 style="margin-top: 15px;">Q: å¦‚ä½•æŸ¥çœ‹å½“å‰éªŒè¯ç çš„æ­£ç¡®ç­”æ¡ˆï¼Ÿ</h4>
            <div class="success-box">
                <strong>A:</strong> æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·(F12)ï¼Œåœ¨Consoleä¸­å¯ä»¥çœ‹åˆ°éªŒè¯ç åˆ·æ–°æ—¶çš„æ—¥å¿—è¾“å‡º
            </div>

            <h4 style="margin-top: 15px;">Q: å¦‚ä½•è‡ªå®šä¹‰éªŒè¯ç é•¿åº¦å’Œæ ·å¼ï¼Ÿ</h4>
            <div class="success-box">
                <strong>A:</strong> åœ¨ <code>login/index.vue</code> çš„ <code>refreshCaptcha</code> æ–¹æ³•ä¸­ä¿®æ”¹ <code>createCaptcha(4, 120, 40)</code> çš„å‚æ•°
            </div>
        </div>

        <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 2px solid #e0e0e0;">
            <p style="color: #666;">âœ… å›¾åƒéªŒè¯ç åŠŸèƒ½å·²å®Œæˆï¼Œè¯·æŒ‰ç…§æµ‹è¯•æ­¥éª¤éªŒè¯åŠŸèƒ½ï¼</p>
            <p style="color: #999; font-size: 12px; margin-top: 10px;">é¡¹ç›®å¯åŠ¨åè®¿é—®ç™»å½•é¡µé¢å³å¯çœ‹åˆ°éªŒè¯ç </p>
        </div>
    </div>

    <script>
        let currentCaptcha = { text: '', image: '' }

        // ç”ŸæˆéšæœºéªŒè¯ç æ–‡æœ¬
        function generateCaptchaText(length = 4) {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789'
            let text = ''
            for (let i = 0; i < length; i++) {
                text += chars.charAt(Math.floor(Math.random() * chars.length))
            }
            return text
        }

        // ç”Ÿæˆéšæœºé¢œè‰²
        function randomColor(min, max) {
            const r = randomNum(min, max)
            const g = randomNum(min, max)
            const b = randomNum(min, max)
            return `rgb(${r},${g},${b})`
        }

        // ç”Ÿæˆéšæœºæ•°
        function randomNum(min, max) {
            return Math.floor(Math.random() * (max - min) + min)
        }

        // ç»˜åˆ¶éªŒè¯ç 
        function drawCaptcha(text, width = 120, height = 40) {
            const canvas = document.createElement('canvas')
            canvas.width = width
            canvas.height = height
            const ctx = canvas.getContext('2d')

            // ç»˜åˆ¶èƒŒæ™¯
            ctx.fillStyle = randomColor(180, 240)
            ctx.fillRect(0, 0, width, height)

            // ç»˜åˆ¶å¹²æ‰°çº¿
            for (let i = 0; i < 8; i++) {
                ctx.strokeStyle = randomColor(40, 180)
                ctx.beginPath()
                ctx.moveTo(randomNum(0, width), randomNum(0, height))
                ctx.lineTo(randomNum(0, width), randomNum(0, height))
                ctx.stroke()
            }

            // ç»˜åˆ¶å¹²æ‰°ç‚¹
            for (let i = 0; i < 100; i++) {
                ctx.fillStyle = randomColor(0, 255)
                ctx.beginPath()
                ctx.arc(randomNum(0, width), randomNum(0, height), 1, 0, 2 * Math.PI)
                ctx.fill()
            }

            // ç»˜åˆ¶éªŒè¯ç æ–‡å­—
            for (let i = 0; i < text.length; i++) {
                const fontSize = randomNum(20, 28)
                ctx.font = `${fontSize}px Arial`
                ctx.fillStyle = randomColor(50, 160)
                ctx.textBaseline = 'middle'
                
                const x = (width / text.length) * i + randomNum(10, 15)
                const y = height / 2 + randomNum(-5, 5)
                const angle = randomNum(-15, 15) * Math.PI / 180
                
                ctx.save()
                ctx.translate(x, y)
                ctx.rotate(angle)
                ctx.fillText(text[i], 0, 0)
                ctx.restore()
            }

            return canvas.toDataURL('image/png')
        }

        // åˆ·æ–°éªŒè¯ç 
        function refreshCaptcha() {
            const text = generateCaptchaText(4)
            const image = drawCaptcha(text, 120, 40)
            
            currentCaptcha = { text, image }
            
            document.getElementById('captchaImage').src = image
            document.getElementById('captchaInput').value = ''
            document.getElementById('result').classList.remove('show')
            
            console.log('ğŸ” éªŒè¯ç å·²åˆ·æ–°:', text)
        }

        // éªŒè¯éªŒè¯ç 
        function verifyCaptcha() {
            const input = document.getElementById('captchaInput').value
            const result = document.getElementById('result')
            
            if (!input) {
                result.textContent = 'âŒ è¯·è¾“å…¥éªŒè¯ç '
                result.className = 'result error show'
                return
            }
            
            if (input.toUpperCase() === currentCaptcha.text.toUpperCase()) {
                result.textContent = 'âœ… éªŒè¯ç æ­£ç¡®ï¼'
                result.className = 'result success show'
            } else {
                result.textContent = `âŒ éªŒè¯ç é”™è¯¯ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯: ${currentCaptcha.text}`
                result.className = 'result error show'
                setTimeout(refreshCaptcha, 1500)
            }
        }

        // é¡µé¢åŠ è½½æ—¶ç”ŸæˆéªŒè¯ç 
        window.onload = function() {
            refreshCaptcha()
        }

        // å›è½¦éªŒè¯
        document.getElementById('captchaInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                verifyCaptcha()
            }
        })
    </script>
</body>
</html>

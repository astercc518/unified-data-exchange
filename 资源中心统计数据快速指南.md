# 资源中心统计数据快速使用指南

## 🎯 功能概述

资源中心顶部统计卡片现在会根据用户角色显示不同范围的数据:

- **管理员**: 看到所有客户的汇总数据
- **代理**: 看到本代理下所有客户的汇总数据
- **客户**: 看到个人数据

---

## 👥 不同角色看到的内容

### 管理员 (Admin)

```
┌─────────────────────────────────────────────┐
│ 资源中心                                     │
├─────────────────────────────────────────────┤
│ ┌──────────────────┐ ┌──────────────────┐  │
│ │   15,800.50      │ │   8,500,000      │  │
│ │ 所有客户账户余额 │ │ 所有客户已购买   │  │
│ │ 总额 (U)         │ │ 数据总量         │  │
│ └──────────────────┘ └──────────────────┘  │
│ ┌──────────────────┐                        │
│ │   24,203.00      │                        │
│ │ 所有客户累计消费 │                        │
│ │ 总额 (U)         │                        │
│ └──────────────────┘                        │
└─────────────────────────────────────────────┘
```

**显示内容**:
- **账户余额**: 所有客户账户余额总额
- **已购买数据**: 所有客户已购买数据总量
- **累计消费**: 所有客户累计消费总额

**用途**:
- 查看平台整体运营情况
- 监控所有客户的消费情况
- 分析平台数据销售总量

---

### 代理 (Agent)

```
┌─────────────────────────────────────────────┐
│ 资源中心                                     │
├─────────────────────────────────────────────┤
│ ┌──────────────────┐ ┌──────────────────┐  │
│ │   3,200.00       │ │   1,500,000      │  │
│ │ 本代理下客户账户 │ │ 本代理下客户已   │  │
│ │ 余额总额 (U)     │ │ 购买数据总量     │  │
│ └──────────────────┘ └──────────────────┘  │
│ ┌──────────────────┐                        │
│ │   5,600.00       │                        │
│ │ 本代理下客户累计 │                        │
│ │ 消费总额 (U)     │                        │
│ └──────────────────┘                        │
└─────────────────────────────────────────────┘
```

**显示内容**:
- **账户余额**: 本代理下所有客户账户余额总额
- **已购买数据**: 本代理下所有客户已购买数据总量
- **累计消费**: 本代理下所有客户累计消费总额

**用途**:
- 查看团队整体业绩
- 监控客户消费情况
- 分析团队数据销售量

---

### 客户 (Customer)

```
┌─────────────────────────────────────────────┐
│ 资源中心                                     │
├─────────────────────────────────────────────┤
│ ┌──────────────────┐ ┌──────────────────┐  │
│ │   1,580.50       │ │   850,000        │  │
│ │ 账户余额 (U)     │ │ 已购买数据       │  │
│ └──────────────────┘ └──────────────────┘  │
│ ┌──────────────────┐                        │
│ │   2,420.30       │                        │
│ │ 累计消费 (U)     │                        │
│ └──────────────────┘                        │
└─────────────────────────────────────────────┘
```

**显示内容**:
- **账户余额**: 个人账户余额
- **已购买数据**: 个人已购买数据
- **累计消费**: 个人累计消费

**用途**:
- 查看个人账户情况
- 了解购买历史
- 掌握消费记录

---

## 📊 数据说明

### 账户余额

| 角色 | 统计范围 |
|------|----------|
| 管理员 | 平台所有客户的账户余额总和 |
| 代理 | 本代理下所有客户的账户余额总和 |
| 客户 | 个人账户余额 |

### 已购买数据

| 角色 | 统计范围 |
|------|----------|
| 管理员 | 平台所有订单的数据量总和 |
| 代理 | 本代理下客户所有订单的数据量总和 |
| 客户 | 个人所有订单的数据量总和 |

### 累计消费

| 角色 | 统计范围 |
|------|----------|
| 管理员 | 平台所有订单的金额总和 |
| 代理 | 本代理下客户所有订单的金额总和 |
| 客户 | 个人所有订单的金额总和 |

---

## 🔄 数据刷新

### 自动刷新

- 每次进入资源中心时自动加载
- 页面激活时自动刷新
- 无需手动操作

### 数据来源

1. **优先**: 从数据库实时查询
2. **备用**: 从localStorage加载(如果API失败)

---

## 📍 在哪里看到

### 资源中心

```
侧边栏 → 资源中心 → 资源中心
```

页面顶部显示3个统计卡片。

### 订阅中心

```
侧边栏 → 资源中心 → 订阅中心
```

页面顶部显示3个统计卡片(仅客户可见)。

---

## 💡 使用技巧

### 管理员

**查看全局运营情况**:
1. 登录管理员账号
2. 访问资源中心
3. 顶部卡片显示所有客户的汇总数据
4. 可以快速了解平台整体情况

**用途**:
- 监控平台总体运营状况
- 分析整体销售趋势
- 评估平台健康度

---

### 代理

**查看团队业绩**:
1. 登录代理账号
2. 访问资源中心
3. 顶部卡片显示本代理下客户的汇总数据
4. 可以了解团队整体表现

**用途**:
- 监控团队业绩
- 了解客户消费情况
- 评估团队发展

---

### 客户

**查看个人账户**:
1. 登录客户账号
2. 访问资源中心或订阅中心
3. 顶部卡片显示个人数据
4. 可以掌握个人消费情况

**用途**:
- 查看账户余额
- 了解购买历史
- 规划采购预算

---

## ⚙️ 技术细节

### API接口

```
GET /api/stats/resource-center/:userType/:userId
```

**参数**:
- `userType`: admin / agent / customer
- `userId`: 用户ID

**响应**:
```json
{
  "success": true,
  "data": {
    "totalBalance": "15800.50",
    "totalPurchased": 8500000,
    "totalSpent": "24203.00"
  }
}
```

---

## ❓ 常见问题

### Q1: 为什么管理员和代理看到的数字很大?

**A**: 因为显示的是汇总数据:
- 管理员看到所有客户的总和
- 代理看到本代理下所有客户的总和

### Q2: 数据多久更新一次?

**A**: 
- 每次进入页面时自动更新
- 从其他页面返回时自动刷新
- 数据来自数据库,实时准确

### Q3: 如果API调用失败怎么办?

**A**: 
- 系统会自动降级到localStorage备用方案
- 虽然可能不是最新数据,但能保证功能可用
- 建议检查网络连接或联系技术支持

### Q4: 代理能看到其他代理的数据吗?

**A**: 
- 不能
- 每个代理只能看到自己团队的数据
- 数据完全隔离,保证安全性

---

## 🎯 应用场景

### 场景1: 管理员监控平台

```
管理员每天早上登录系统 
  → 访问资源中心
  → 查看统计卡片
  → 了解平台整体运营情况
  → 发现问题及时调整策略
```

### 场景2: 代理管理团队

```
代理每周查看团队业绩
  → 访问资源中心
  → 查看统计卡片
  → 了解团队消费情况
  → 分析客户需求
  → 制定销售策略
```

### 场景3: 客户规划采购

```
客户准备购买数据
  → 访问资源中心
  → 查看账户余额
  → 查看历史消费
  → 规划本次采购预算
  → 决定购买数量
```

---

## 🎉 总结

资源中心统计数据现在更智能了!

✅ **管理员**: 掌握全局,运筹帷幄
✅ **代理**: 团队业绩,一目了然
✅ **客户**: 个人账户,清晰明了

每个角色都能看到最相关的数据,提升使用体验! 🚀

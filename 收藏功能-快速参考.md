# æ”¶è—åŠŸèƒ½ - å¿«é€Ÿå‚è€ƒ

## åŠŸèƒ½æ¦‚è¿°

âœ… **èµ„æºä¸­å¿ƒ**ï¼šå®¢æˆ·å¯æ”¶è—æ•°æ®  
âœ… **å®¢æˆ·é¦–é¡µ**ï¼šæ˜¾ç¤ºæ”¶è—åˆ—è¡¨ï¼Œç§»é™¤æœåŠ¡çŠ¶æ€  
âœ… **ä»£ç†é¦–é¡µ**ï¼šæ˜¾ç¤ºå®¢æˆ·æ”¶è—Top5ï¼ˆæŒ‰åˆ©æ¶¦ç‡ï¼‰ï¼Œç§»é™¤æœåŠ¡çŠ¶æ€

## APIåˆ—è¡¨

### æ”¶è—ç®¡ç†
```bash
# æ·»åŠ æ”¶è—
POST /api/favorites
Body: { "customer_id": 5, "data_id": 10 }

# å–æ¶ˆæ”¶è—
DELETE /api/favorites/by-data/:customerId/:dataId

# è·å–æ”¶è—åˆ—è¡¨
GET /api/favorites/customer/:customerId

# æ£€æŸ¥æ”¶è—çŠ¶æ€
GET /api/favorites/check/:customerId/:dataId

# ä»£ç†Top5ï¼ˆæŒ‰åˆ©æ¶¦ç‡ï¼‰
GET /api/favorites/agent/:agentId/top-profit?limit=5
```

## æ•°æ®åº“

### è¡¨ç»“æ„
```sql
CREATE TABLE `favorites` (
  `id` INT PRIMARY KEY AUTO_INCREMENT,
  `customer_id` INT NOT NULL,
  `data_id` INT NOT NULL,
  `country_name` VARCHAR(50),
  `data_type` VARCHAR(100),
  `sell_price` DECIMAL(10,5),
  `create_time` BIGINT NOT NULL,
  UNIQUE KEY `idx_customer_data` (`customer_id`, `data_id`)
);
```

## å…³é”®æ–‡ä»¶

### åç«¯
- `/backend/models/Favorite.js` - æ”¶è—æ¨¡å‹
- `/backend/routes/favorites.js` - æ”¶è—è·¯ç”±

### å‰ç«¯
- `/src/views/resource/center.vue` - èµ„æºä¸­å¿ƒï¼ˆæ·»åŠ æ”¶è—æŒ‰é’®ï¼‰
- `/src/views/dashboard/customer.vue` - å®¢æˆ·é¦–é¡µï¼ˆæ˜¾ç¤ºæ”¶è—ï¼‰
- `/src/views/dashboard/agent.vue` - ä»£ç†é¦–é¡µï¼ˆæ˜¾ç¤ºTop5ï¼‰

## æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•è„šæœ¬
./test-favorites.sh
```

## ä½¿ç”¨æ–¹æ³•

### å®¢æˆ·æ“ä½œ
1. ç™»å½• â†’ èµ„æºä¸­å¿ƒ
2. ç‚¹å‡»æ•°æ®è¡Œçš„"æ”¶è—"æŒ‰é’®
3. é¦–é¡µæŸ¥çœ‹"æˆ‘çš„æ”¶è—"
4. ç‚¹å‡»æ”¶è—é¡¹å¯è´­ä¹°

### ä»£ç†æŸ¥çœ‹
1. ç™»å½• â†’ é¦–é¡µ
2. æŸ¥çœ‹"å®¢æˆ·çƒ­é—¨æ”¶è—"å¡ç‰‡
3. æ˜¾ç¤ºåˆ©æ¶¦ç‡Top5æ•°æ®

## å…³é”®ç‰¹æ€§

- ğŸ”’ é˜²é‡å¤æ”¶è—ï¼ˆå”¯ä¸€ç´¢å¼•ï¼‰
- ğŸ“Š åˆ©æ¶¦ç‡è®¡ç®—ï¼š`(å”®ä»·-æˆæœ¬)/æˆæœ¬ Ã— 100%`
- â° æ—¶é—´ç­›é€‰ï¼šä¸€å‘¨å†…æ•°æ®
- ğŸ’¾ æ•°æ®å¿«ç…§ï¼šä¿å­˜æ”¶è—æ—¶ä»·æ ¼
- ğŸ”„ å®æ—¶çŠ¶æ€ï¼šå…³è”æœ€æ–°æ•°æ®

---

**çŠ¶æ€**ï¼šâœ… å·²éƒ¨ç½²  
**æµ‹è¯•**ï¼šâœ… é€šè¿‡

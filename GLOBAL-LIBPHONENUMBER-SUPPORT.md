# å…¨çƒè¿è¥å•†æŸ¥è¯¢ - Google libphonenumber æ”¯æŒ

## ğŸ“‹ æ¦‚è¿°

ç³»ç»Ÿå·²å…¨é¢å‡çº§ï¼Œ**æ‰€æœ‰å›½å®¶çš„è¿è¥å•†æŸ¥è¯¢éƒ½ç»Ÿä¸€ä½¿ç”¨ Google libphonenumber æ ‡å‡†åº“**ï¼ˆé€šè¿‡ awesome-phonenumber å®ç°ï¼‰ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸŒ **å…¨çƒæ”¯æŒ**ï¼šæ”¯æŒæ‰€æœ‰å›½å®¶å’Œåœ°åŒºçš„ç”µè¯å·ç 
- ğŸ” **æ™ºèƒ½è§£æ**ï¼šè‡ªåŠ¨è¯†åˆ«å·ç æ ¼å¼å’Œå›½å®¶ä»£ç 
- âœ… **æ ¼å¼éªŒè¯**ï¼šä¸¥æ ¼çš„å·ç æœ‰æ•ˆæ€§æ£€æŸ¥
- ğŸ¯ **ç²¾ç¡®åŒ¹é…**ï¼šåŸºäºè¿è¥å•†å·æ®µçš„æ™ºèƒ½åˆ†ç»„
- ğŸ“Š **ç»Ÿä¸€æ ‡å‡†**ï¼šæ‰€æœ‰å›½å®¶ä½¿ç”¨ç›¸åŒçš„åˆ†ææ–¹æ³•

## ğŸš€ å‡çº§å†…å®¹

### ä¹‹å‰
- ç¾å›½å·ç ï¼šä½¿ç”¨ awesome-phonenumberï¼ˆlibphonenumberï¼‰
- å…¶ä»–å›½å®¶ï¼šä½¿ç”¨ç®€å•å·æ®µåŒ¹é…

### ç°åœ¨
- **æ‰€æœ‰å›½å®¶**ï¼šç»Ÿä¸€ä½¿ç”¨ awesome-phonenumberï¼ˆlibphonenumberï¼‰

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. æ ¸å¿ƒå·¥å…·ç±»

**æ–‡ä»¶**: `backend/utils/phoneNumberAnalyzer.js`

```javascript
/**
 * åˆ†æä»»æ„å›½å®¶å·ç çš„è¿è¥å•†åˆ†å¸ƒ
 * @param {Array<string>} phoneNumbers - ç”µè¯å·ç æ•°ç»„
 * @param {Array<object>} operators - è¿è¥å•†é…ç½®
 * @param {string} regionCode - å›½å®¶ä»£ç ï¼ˆå¦‚ 'US', 'CN', 'GB'ï¼‰
 */
function analyzeOperatorDistribution(phoneNumbers, operators, regionCode)
```

**å…³é”®ç‰¹æ€§**ï¼š
- âœ… ä½¿ç”¨ libphonenumber éªŒè¯å·ç æœ‰æ•ˆæ€§
- âœ… è‡ªåŠ¨è¿‡æ»¤æ— æ•ˆå·ç 
- âœ… æ”¯æŒ 1-4 ä½å·æ®µå‰ç¼€åŒ¹é…
- âœ… è¿”å›è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯

### 2. åç«¯è·¯ç”±

**æ–‡ä»¶**: `backend/routes/dataProcessing.js`

**å›½å®¶ä»£ç æ˜ å°„è¡¨**ï¼š
```javascript
const countryCodeMap = {
  '1': 'US',      // ç¾å›½
  '86': 'CN',     // ä¸­å›½
  '91': 'IN',     // å°åº¦
  '44': 'GB',     // è‹±å›½
  '81': 'JP',     // æ—¥æœ¬
  '82': 'KR',     // éŸ©å›½
  '65': 'SG',     // æ–°åŠ å¡
  '60': 'MY',     // é©¬æ¥è¥¿äºš
  '66': 'TH',     // æ³°å›½
  '84': 'VN',     // è¶Šå—
  '62': 'ID',     // å°åº¦å°¼è¥¿äºš
  '63': 'PH',     // è²å¾‹å®¾
  '880': 'BD',    // å­ŸåŠ æ‹‰å›½
  '92': 'PK'      // å·´åŸºæ–¯å¦
};
```

**ç»Ÿä¸€å¤„ç†é€»è¾‘**ï¼š
```javascript
// æ‰€æœ‰å›½å®¶ç»Ÿä¸€ä½¿ç”¨ awesome-phonenumber
const regionCode = countryCodeMap[countryCode] || null;
const result = PhoneAnalyzer.analyzeOperatorDistribution(
  phoneNumbers, 
  operators, 
  regionCode
);

// æ·»åŠ åˆ†ææ–¹æ³•æ ‡è¯†
result.analysisMethod = 'awesome-phonenumber';
result.note = 'ä½¿ç”¨ Google libphonenumber åº“è¿›è¡Œå·ç è§£æå’ŒéªŒè¯';
```

### 3. å‰ç«¯æ˜¾ç¤º

**æ–‡ä»¶**: `src/views/data/processing.vue`

**æ‰€æœ‰å›½å®¶éƒ½æ˜¾ç¤ºåˆ†ææ–¹æ³•**ï¼š
```javascript
const analysisMethod = response.data.analysisMethod || 'unknown'
const methodText = analysisMethod === 'awesome-phonenumber' 
  ? 'ä½¿ç”¨ Google libphonenumber åº“è¿›è¡Œæ™ºèƒ½åˆ†æ'
  : 'ä½¿ç”¨å·æ®µåŒ¹é…'

this.$message({
  message: `åˆ†æå®Œæˆï¼æ£€æµ‹åˆ° ${distribution.length} ä¸ªè¿è¥å•†
    âœ“ åˆ†ææ–¹æ³•ï¼š${methodText}`
})
```

## ğŸ“Š æ”¯æŒçš„å›½å®¶ç¤ºä¾‹

| å›½å®¶ | å›½ç  | åŒºåŸŸä»£ç  | å·ç ç¤ºä¾‹ | æ ¼å¼ |
|------|------|----------|----------|------|
| ğŸ‡ºğŸ‡¸ ç¾å›½ | +1 | US | 12025551234 | 11ä½ |
| ğŸ‡¨ğŸ‡³ ä¸­å›½ | +86 | CN | 8613800138000 | 13ä½ |
| ğŸ‡®ğŸ‡³ å°åº¦ | +91 | IN | 917700123456 | 12ä½ |
| ğŸ‡¬ğŸ‡§ è‹±å›½ | +44 | GB | 442071234567 | 12ä½ |
| ğŸ‡¯ğŸ‡µ æ—¥æœ¬ | +81 | JP | 8180123456789 | 12-13ä½ |
| ğŸ‡°ğŸ‡· éŸ©å›½ | +82 | KR | 821012345678 | 11-12ä½ |
| ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ | +65 | SG | 6581234567 | 10ä½ |

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•æ–‡ä»¶

å·²åˆ›å»ºå¤šå›½æµ‹è¯•æ•°æ®æ–‡ä»¶ï¼š
```
backend/test_data/multi_country_numbers.txt
```

åŒ…å«ä»¥ä¸‹å›½å®¶çš„å·ç ï¼š
- ç¾å›½ (US) - 8æ¡
- ä¸­å›½ (CN) - 10æ¡
- è‹±å›½ (GB) - 5æ¡
- å°åº¦ (IN) - 5æ¡
- æ–°åŠ å¡ (SG) - 4æ¡

### è¿è¡Œæµ‹è¯•

```bash
# 1. è¿è¡Œå•å…ƒæµ‹è¯•
cd /home/vue-element-admin/backend
node test-awesome-phonenumber.js

# 2. ä¸Šä¼ æµ‹è¯•æ–‡ä»¶è¿›è¡Œå®Œæ•´æµ‹è¯•
# - ç™»å½•ç³»ç»Ÿ
# - ä¸Šä¼  multi_country_numbers.txt
# - ç‚¹å‡»"æŒ‰è¿è¥å•†æå–"
# - æŸ¥çœ‹åˆ†æç»“æœ
```

### é¢„æœŸç»“æœ

æ‰€æœ‰å›½å®¶çš„åˆ†æç»“æœéƒ½åº”æ˜¾ç¤ºï¼š
```
âœ“ åˆ†ææ–¹æ³•ï¼šä½¿ç”¨ Google libphonenumber åº“è¿›è¡Œæ™ºèƒ½åˆ†æ
```

ç»Ÿè®¡ä¿¡æ¯åŒ…æ‹¬ï¼š
- âœ… æ€»æ•°æ®é‡
- âœ… æœ‰æ•ˆå·ç æ•°
- âœ… æ— æ•ˆå·ç æ•°
- âœ… æœªåŒ¹é…å·ç æ•°
- âœ… è¿è¥å•†åˆ†å¸ƒè¯¦æƒ…

## ğŸ“ ä½¿ç”¨è¯´æ˜

### 1. æ–‡ä»¶ä¸Šä¼ 

ä¸Šä¼ åŒ…å«ç”µè¯å·ç çš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ”¯æŒå¤šç§æ ¼å¼ï¼š
```
12025551234
(202) 555-1234
202-555-1234
+1-202-555-1234
```

### 2. æ™ºèƒ½è¯†åˆ«

ç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
- è¯†åˆ«å·ç æ‰€å±å›½å®¶
- éªŒè¯å·ç æœ‰æ•ˆæ€§
- æ ‡å‡†åŒ–ä¸º E.164 æ ¼å¼
- è¿‡æ»¤æ— æ•ˆå·ç 

### 3. è¿è¥å•†åˆ†æ

ç‚¹å‡»"æŒ‰è¿è¥å•†æå–"ï¼š
- æŸ¥çœ‹è¿è¥å•†åˆ†å¸ƒç»Ÿè®¡
- æ˜¾ç¤ºåˆ†ææ–¹æ³•ï¼ˆGoogle libphonenumberï¼‰
- é€‰æ‹©è¿è¥å•†è¿›è¡Œæå–
- ä¸‹è½½æå–ç»“æœ

### 4. ç»“æœè¯´æ˜

åˆ†æç»“æœåŒ…å«ï¼š
```json
{
  "totalCount": 100,        // æ€»æ•°æ®é‡
  "validCount": 95,         // æœ‰æ•ˆå·ç 
  "invalidCount": 3,        // æ— æ•ˆå·ç 
  "unmatchedCount": 2,      // æœªåŒ¹é…è¿è¥å•†
  "analysisMethod": "awesome-phonenumber",
  "note": "ä½¿ç”¨ Google libphonenumber åº“è¿›è¡Œå·ç è§£æå’ŒéªŒè¯",
  "regionCode": "US",       // å›½å®¶ä»£ç 
  "distribution": [...]     // è¿è¥å•†åˆ†å¸ƒ
}
```

## ğŸ¯ ä¼˜åŠ¿

### 1. æ ‡å‡†åŒ–
- ä½¿ç”¨ Google å®˜æ–¹æ ‡å‡†åº“
- å…¨çƒé€šç”¨çš„å·ç éªŒè¯è§„åˆ™
- ç»Ÿä¸€çš„æ•°æ®å¤„ç†æµç¨‹

### 2. å‡†ç¡®æ€§
- ä¸¥æ ¼çš„å·ç æ ¼å¼éªŒè¯
- è‡ªåŠ¨è¯†åˆ«å›½å®¶å’ŒåŒºå·
- æ™ºèƒ½å¤„ç†å„ç§è¾“å…¥æ ¼å¼

### 3. çµæ´»æ€§
- æ”¯æŒæ‰€æœ‰å›½å®¶å’Œåœ°åŒº
- è‡ªåŠ¨é€‚é…ä¸åŒå·ç æ ¼å¼
- å¯æ‰©å±•çš„è¿è¥å•†é…ç½®

### 4. å¯ç»´æŠ¤æ€§
- ç»Ÿä¸€çš„ä»£ç å®ç°
- æ¸…æ™°çš„æ¨¡å—åˆ’åˆ†
- å®Œå–„çš„é”™è¯¯å¤„ç†

## ğŸ”„ å‘åå…¼å®¹

ä¿ç•™äº†æ—§å‡½æ•°ä»¥ç¡®ä¿å…¼å®¹æ€§ï¼š

```javascript
// æ—§å‡½æ•°ï¼ˆå·²åºŸå¼ƒä½†ä»å¯ç”¨ï¼‰
function analyzeUSOperatorDistribution(phoneNumbers, operators) {
  return analyzeOperatorDistribution(phoneNumbers, operators, 'US');
}
```

å»ºè®®æ–°ä»£ç ä½¿ç”¨é€šç”¨å‡½æ•°ï¼š
```javascript
// æ–°å‡½æ•°ï¼ˆæ¨èï¼‰
analyzeOperatorDistribution(phoneNumbers, operators, 'US')  // ç¾å›½
analyzeOperatorDistribution(phoneNumbers, operators, 'CN')  // ä¸­å›½
analyzeOperatorDistribution(phoneNumbers, operators, 'GB')  // è‹±å›½
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [awesome-phonenumber é›†æˆè¯´æ˜](./AWESOME-PHONENUMBER-INTEGRATION.md)
- [å¿«é€Ÿå¼€å§‹æŒ‡å—](./AWESOME-PHONENUMBER-QUICKSTART.md)
- [é›†æˆå®Œæˆæ€»ç»“](./AWESOME-PHONENUMBER-COMPLETE.md)

## ğŸ‰ æ€»ç»“

ç³»ç»Ÿç°å·²å…¨é¢æ”¯æŒ Google libphonenumber æ ‡å‡†ï¼š
- âœ… æ‰€æœ‰å›½å®¶ç»Ÿä¸€ä½¿ç”¨æ™ºèƒ½åˆ†æ
- âœ… æä¾›å‡†ç¡®çš„å·ç éªŒè¯
- âœ… æ”¯æŒå¤šç§å·ç æ ¼å¼
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†
- âœ… å‘åå…¼å®¹æ—§ä»£ç 

**å‡çº§æ—¶é—´**: 2025-10-17  
**å½±å“èŒƒå›´**: å…¨çƒæ‰€æœ‰å›½å®¶  
**æµ‹è¯•çŠ¶æ€**: âœ… å·²é€šè¿‡æµ‹è¯•

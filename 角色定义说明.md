# ğŸ­ ç³»ç»Ÿè§’è‰²å®šä¹‰è¯´æ˜

## ğŸ“‹ é‡è¦æé†’

**admin â‰  agent**

- âœ… **admin**: è¶…çº§ç®¡ç†å‘˜,æ‹¥æœ‰æ‰€æœ‰ç³»ç»Ÿæƒé™
- âœ… **agent**: ä»£ç†(é”€å”®è§’è‰²),åªæœ‰éƒ¨åˆ†ä¸šåŠ¡æƒé™  
- âœ… **customer**: å®¢æˆ·,æ™®é€šç”¨æˆ·

## ğŸ” ä¸‰å¤§è§’è‰²è¯¦ç»†è¯´æ˜

### 1. ç®¡ç†å‘˜ (admin)

**è§’è‰²ç±»å‹**: `admin`  
**è§’è‰²æ•°ç»„**: `['admin']`  
**ä¸šåŠ¡å®šä½**: è¶…çº§ç®¡ç†å‘˜,ç³»ç»Ÿæœ€é«˜æƒé™  
**ç™»å½•è´¦å·**: `admin` (ç‰¹æ®Šè´¦å·,å­˜å‚¨åœ¨agentsè¡¨)

#### æƒé™èŒƒå›´
- âœ… ç®¡ç†æ‰€æœ‰å®¢æˆ·
- âœ… ç®¡ç†æ‰€æœ‰ä»£ç†
- âœ… ç®¡ç†æ‰€æœ‰æ•°æ®
- âœ… ç®¡ç†æ‰€æœ‰è®¢å•
- âœ… ç³»ç»Ÿè®¾ç½®å’Œé…ç½®
- âœ… å……å€¼/æ‰£æ¬¾æ“ä½œ
- âœ… ç»“ç®—ç®¡ç†
- âœ… å®Œå…¨çš„å¢åˆ æ”¹æŸ¥æƒé™

#### æ•°æ®èŒƒå›´
- å¯ä»¥æŸ¥çœ‹**æ‰€æœ‰**å®¢æˆ·çš„æ•°æ®
- å¯ä»¥æŸ¥çœ‹**æ‰€æœ‰**ä»£ç†çš„æ•°æ®  
- å¯ä»¥æŸ¥çœ‹**æ‰€æœ‰**è®¢å•å’Œåé¦ˆ
- æ²¡æœ‰æ•°æ®éš”ç¦»é™åˆ¶

---

### 2. ä»£ç† (agent)

**è§’è‰²ç±»å‹**: `agent`  
**è§’è‰²æ•°ç»„**: `['agent']`  
**ä¸šåŠ¡å®šä½**: é”€å”®è§’è‰²,ç®¡ç†æ‰€å±å®¢æˆ·  
**ç™»å½•è´¦å·**: `agent01`, `agent02` ç­‰ (å­˜å‚¨åœ¨agentsè¡¨)

#### æƒé™èŒƒå›´ (æœ‰é™æƒé™)
- âœ… æŸ¥çœ‹æœ¬ä»£ç†ä¸‹çš„å®¢æˆ·(åªè¯»)
- âœ… å®¡æ ¸æœ¬ä»£ç†å®¢æˆ·çš„è®¢å•
- âœ… å‘è´§æœ¬ä»£ç†å®¢æˆ·çš„è®¢å•
- âœ… ç¼–è¾‘æœ¬ä»£ç†å®¢æˆ·çš„åé¦ˆ
- âŒ **ä¸èƒ½**åˆ›å»º/ç¼–è¾‘/åˆ é™¤å®¢æˆ·
- âŒ **ä¸èƒ½**å……å€¼/æ‰£æ¬¾
- âŒ **ä¸èƒ½**ä¸Šä¼ /ç®¡ç†æ•°æ®
- âŒ **ä¸èƒ½**è®¿é—®ç³»ç»Ÿè®¾ç½®

#### æ•°æ®èŒƒå›´ (æ•°æ®éš”ç¦»)
- åªèƒ½æŸ¥çœ‹ `agent_id` ç­‰äºè‡ªå·±IDçš„å®¢æˆ·
- åªèƒ½æ“ä½œè‡ªå·±å®¢æˆ·çš„è®¢å•
- åªèƒ½ç¼–è¾‘è‡ªå·±å®¢æˆ·çš„åé¦ˆ
- **ä¸¥æ ¼çš„æ•°æ®éš”ç¦»**

#### æ ¸å¿ƒä¸šåŠ¡æµç¨‹
1. æŸ¥çœ‹è‡ªå·±çš„å®¢æˆ·åˆ—è¡¨
2. å®¢æˆ·æäº¤è®¢å•å,è¿›è¡Œå®¡æ ¸
3. å®¡æ ¸é€šè¿‡å,è¿›è¡Œå‘è´§
4. æŸ¥çœ‹å’Œç¼–è¾‘å®¢æˆ·çš„æ•°æ®åé¦ˆ

---

### 3. å®¢æˆ· (customer)

**è§’è‰²ç±»å‹**: `customer`  
**è§’è‰²æ•°ç»„**: `['customer']`  
**ä¸šåŠ¡å®šä½**: æ™®é€šç”¨æˆ·,è´­ä¹°æ•°æ®  
**ç™»å½•è´¦å·**: å®¢æˆ·è‡ªå·±çš„è´¦å· (å­˜å‚¨åœ¨usersè¡¨)

#### æƒé™èŒƒå›´
- âœ… æµè§ˆèµ„æºä¸­å¿ƒæ•°æ®
- âœ… è´­ä¹°æ•°æ®
- âœ… æäº¤è®¢å•å®¡æ ¸
- âœ… æŸ¥çœ‹è‡ªå·±çš„è®¢å•
- âœ… æäº¤æ•°æ®åé¦ˆ
- âœ… æ”¶è—æ„Ÿå…´è¶£çš„æ•°æ®
- âŒ **ä¸èƒ½**æŸ¥çœ‹å…¶ä»–å®¢æˆ·ä¿¡æ¯
- âŒ **ä¸èƒ½**å®¡æ ¸æˆ–å‘è´§

#### æ•°æ®èŒƒå›´
- åªèƒ½æŸ¥çœ‹è‡ªå·±çš„è®¢å•
- åªèƒ½æäº¤è‡ªå·±çš„åé¦ˆ
- **å®Œå…¨çš„æ•°æ®éš”ç¦»**

---

## ğŸ”§ æŠ€æœ¯å®ç°

### åç«¯è§’è‰²åˆ¤æ–­

```javascript
// /backend/routes/auth.js

// âŒ é”™è¯¯å†™æ³• (adminä¸åº”è¯¥æœ‰agentè§’è‰²)
if (userType === 'agent') {
  roles = ['admin', 'agent'];  // âŒ é”™è¯¯!
}

// âœ… æ­£ç¡®å†™æ³•
if (userType === 'admin') {
  roles = ['admin'];  // âœ… adminåªæœ‰adminè§’è‰²
} else if (userType === 'agent') {
  roles = ['agent'];  // âœ… agentåªæœ‰agentè§’è‰²
} else {
  roles = ['customer'];  // âœ… customeråªæœ‰customerè§’è‰²
}
```

### å‰ç«¯è·¯ç”±æƒé™é…ç½®

```javascript
// /src/router/index.js

// ä»…ç®¡ç†å‘˜å¯è®¿é—®
{
  path: '/data/upload',
  meta: {
    roles: ['admin']  // åªæœ‰admin
  }
}

// ç®¡ç†å‘˜å’Œä»£ç†å¯è®¿é—®
{
  path: '/order/review',
  meta: {
    roles: ['admin', 'agent']  // adminå’Œagentéƒ½å¯ä»¥
  }
}

// æ‰€æœ‰è§’è‰²å¯è®¿é—®
{
  path: '/order/list',
  meta: {
    roles: ['admin', 'agent', 'customer']  // æ‰€æœ‰äºº
  }
}
```

### ç”¨æˆ·ç±»å‹å­˜å‚¨

```javascript
// Vuex Store: /src/store/modules/user.js

state: {
  type: '',  // 'admin' | 'agent' | 'customer'
  roles: []  // ['admin'] | ['agent'] | ['customer']
}
```

---

## ğŸ“Š æƒé™å¯¹æ¯”è¡¨

| åŠŸèƒ½ | admin | agent | customer |
|-----|-------|-------|----------|
| **è§’è‰²å®šä½** | è¶…çº§ç®¡ç†å‘˜ | é”€å”®ä»£ç† | æ™®é€šå®¢æˆ· |
| **æ•°æ®èŒƒå›´** | å…¨éƒ¨æ•°æ® | æœ¬ä»£ç†å®¢æˆ· | ä»…è‡ªå·± |
| **å®¢æˆ·ç®¡ç†** | âœ… å…¨éƒ¨ | âœ… æŸ¥çœ‹(åªè¯») | âŒ |
| **è®¢å•å®¡æ ¸** | âœ… å…¨éƒ¨ | âœ… æœ¬ä»£ç† | âŒ |
| **è®¢å•å‘è´§** | âœ… å…¨éƒ¨ | âœ… æœ¬ä»£ç† | âŒ |
| **æ•°æ®ä¸Šä¼ ** | âœ… | âŒ | âŒ |
| **å……å€¼æ‰£æ¬¾** | âœ… | âŒ | âŒ |
| **ç³»ç»Ÿè®¾ç½®** | âœ… | âŒ | âŒ |
| **è´­ä¹°æ•°æ®** | âœ… | âŒ | âœ… |
| **æäº¤åé¦ˆ** | âœ… | âŒ | âœ… |

---

## âš ï¸ å¸¸è§è¯¯è§£

### âŒ è¯¯è§£1: adminæ˜¯ä»£ç†çš„ä¸€ç§
**é”™è¯¯**: adminæ‹¥æœ‰ `['admin', 'agent']` è§’è‰²  
**æ­£ç¡®**: adminåªæœ‰ `['admin']` è§’è‰²,æ˜¯å®Œå…¨ç‹¬ç«‹çš„è¶…çº§ç®¡ç†å‘˜

### âŒ è¯¯è§£2: ä»£ç†å¯ä»¥çœ‹åˆ°æ‰€æœ‰å®¢æˆ·
**é”™è¯¯**: ä»£ç†å¯ä»¥æŸ¥çœ‹ç³»ç»Ÿä¸­çš„æ‰€æœ‰å®¢æˆ·  
**æ­£ç¡®**: ä»£ç†åªèƒ½æŸ¥çœ‹ `agent_id` ç­‰äºè‡ªå·±çš„å®¢æˆ·

### âŒ è¯¯è§£3: ä»£ç†å¯ä»¥ç¼–è¾‘å®¢æˆ·ä¿¡æ¯
**é”™è¯¯**: ä»£ç†å¯ä»¥ä¿®æ”¹å®¢æˆ·çš„è´¦æˆ·ä¿¡æ¯  
**æ­£ç¡®**: ä»£ç†åªèƒ½**æŸ¥çœ‹**å®¢æˆ·ä¿¡æ¯(åªè¯»),ä¸èƒ½ç¼–è¾‘

---

## ğŸ¯ æ ¸å¿ƒåŸåˆ™

1. **admin â‰  agent**
   - adminæ˜¯è¶…çº§ç®¡ç†å‘˜
   - agentæ˜¯é”€å”®ä»£ç†
   - ä¸¤è€…å®Œå…¨ä¸åŒ

2. **æ•°æ®éš”ç¦»**
   - admin: æ— éš”ç¦»,çœ‹åˆ°å…¨éƒ¨
   - agent: åªçœ‹åˆ°è‡ªå·±çš„å®¢æˆ·
   - customer: åªçœ‹åˆ°è‡ªå·±

3. **æƒé™æœ€å°åŒ–**
   - admin: æ‰€æœ‰æƒé™
   - agent: åªæœ‰ä¸šåŠ¡å¿…éœ€çš„æƒé™
   - customer: åªæœ‰ç”¨æˆ·åŠŸèƒ½æƒé™

4. **å‰åç«¯åŒé‡éªŒè¯**
   - å‰ç«¯: æ§åˆ¶UIæ˜¾ç¤º
   - åç«¯: éªŒè¯å®é™…æƒé™å’Œæ•°æ®è¿‡æ»¤

---

## ğŸ“ æ£€æŸ¥æ¸…å•

ä½¿ç”¨æœ¬è¯´æ˜å‰,è¯·ç¡®è®¤:

- [ ] adminè§’è‰²åªæœ‰ `['admin']`
- [ ] agentè§’è‰²åªæœ‰ `['agent']`  
- [ ] customerè§’è‰²åªæœ‰ `['customer']`
- [ ] åç«¯APIæ ¹æ®userTypeè¿‡æ»¤æ•°æ®
- [ ] å‰ç«¯æ ¹æ®rolesæ˜¾ç¤ºèœå•å’ŒæŒ‰é’®
- [ ] æ‰€æœ‰æ•æ„Ÿæ“ä½œéƒ½æœ‰æƒé™éªŒè¯

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-10-15  
**ç”¨é€”**: æ˜ç¡®ç³»ç»Ÿè§’è‰²å®šä¹‰,é¿å…adminå’Œagentæ··æ·†  
**é‡è¦æ€§**: â­â­â­â­â­ (å¿…è¯»)

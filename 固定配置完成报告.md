# é¡¹ç›®ç«¯å£å’Œæ•°æ®åº“å›ºå®šé…ç½®å®ŒæˆæŠ¥å‘Š

> **é…ç½®æ—¶é—´**: 2025-10-18  
> **é…ç½®çŠ¶æ€**: âœ… å·²å®Œæˆ

---

## âœ… å·²å®Œæˆçš„é…ç½®

### 1ï¸âƒ£ å‰ç«¯ç«¯å£å›ºå®šï¼š9528

#### ä¿®æ”¹æ–‡ä»¶ï¼š[`vue.config.js`](file:///home/vue-element-admin/vue.config.js)

**ä¿®æ”¹å‰**:
```javascript
const port = process.env.port || process.env.npm_config_port || 9528 // dev port
```

**ä¿®æ”¹å**:
```javascript
const port = 9528 // å›ºå®šå‰ç«¯ç«¯å£ä¸º 9528
```

âœ… **æ•ˆæœ**: å‰ç«¯å¼€å‘æœåŠ¡å™¨å°†å§‹ç»ˆè¿è¡Œåœ¨ **9528** ç«¯å£ï¼Œä¸å—ç¯å¢ƒå˜é‡å½±å“

---

### 2ï¸âƒ£ åç«¯ç«¯å£å›ºå®šï¼š3000

#### ä¿®æ”¹æ–‡ä»¶ï¼š[`backend/.env`](file:///home/vue-element-admin/backend/.env)

**ä¿®æ”¹å†…å®¹**:
```env
# æœåŠ¡å™¨é…ç½® - å›ºå®šåç«¯ç«¯å£ 3000
PORT=3000

# å‰ç«¯URLï¼ˆCORSé…ç½®ï¼‰- å›ºå®šå‰ç«¯ç«¯å£ 9528
FRONTEND_URL=http://localhost:9528
```

âœ… **æ•ˆæœ**: 
- åç«¯APIæœåŠ¡å™¨å›ºå®šè¿è¡Œåœ¨ **3000** ç«¯å£
- CORSé…ç½®å·²æ›´æ–°ä¸ºå›ºå®šçš„å‰ç«¯åœ°å€

---

### 3ï¸âƒ£ æ•°æ®åº“å›ºå®šï¼šMariaDB

#### ä¿®æ”¹æ–‡ä»¶ï¼š[`backend/.env`](file:///home/vue-element-admin/backend/.env)

**ä¿®æ”¹å†…å®¹**:
```env
# æ•°æ®åº“é…ç½® - å›ºå®šä½¿ç”¨ MariaDB
DB_TYPE=mysql

# MySQL/MariaDBé…ç½® - å›ºå®šæ•°æ®åº“é…ç½®
DB_HOST=localhost
DB_PORT=3306
DB_NAME=vue_admin
DB_USER=vue_admin_user
DB_PASSWORD=vue_admin_2024
```

#### æ•°æ®åº“é…ç½®æ–‡ä»¶ï¼š[`backend/config/database.js`](file:///home/vue-element-admin/backend/config/database.js)

**ç°æœ‰é…ç½®**ï¼ˆå·²ç¡®è®¤ï¼‰:
```javascript
const dbConfig = {
  dialect: 'mysql',        // MariaDBå…¼å®¹mysqlé©±åŠ¨
  host: 'localhost',
  port: 3306,
  username: 'vue_admin_user',
  password: 'vue_admin_2024',
  database: 'vue_admin',
  // ... è¿æ¥æ± ç­‰å…¶ä»–é…ç½®
}
```

âœ… **æ•ˆæœ**: 
- å›ºå®šä½¿ç”¨ **MariaDB** æ•°æ®åº“
- æ•°æ®åº“è¿æ¥é…ç½®ç»Ÿä¸€ä¸”å›ºå®š
- ä¸å†ä½¿ç”¨SQLiteæˆ–å…¶ä»–æµ‹è¯•æ•°æ®åº“

---

### 4ï¸âƒ£ ç¯å¢ƒé…ç½®æ–‡ä»¶æ›´æ–°

#### ä¿®æ”¹æ–‡ä»¶ï¼š[`.env.development`](file:///home/vue-element-admin/.env.development)

**ä¿®æ”¹å†…å®¹**:
```env
# base api - å›ºå®šåç«¯ç«¯å£ 3000
VUE_APP_BASE_API = 'http://103.246.246.11:3000'

# åç«¯APIåœ°å€ - å›ºå®šç«¯å£ 3000
VUE_APP_API_URL = 'http://103.246.246.11:3000'

# å›ºå®šä½¿ç”¨æ•°æ®åº“æ¨¡å¼
VUE_APP_STORAGE_MODE = 'database'
VUE_APP_USE_DATABASE = true
```

âœ… **æ•ˆæœ**: å‰ç«¯å¼€å‘ç¯å¢ƒå›ºå®šè¿æ¥åˆ°åç«¯3000ç«¯å£å’ŒMariaDBæ•°æ®åº“

---

### 5ï¸âƒ£ å¯åŠ¨è„šæœ¬ä¼˜åŒ–

#### ä¿®æ”¹æ–‡ä»¶ï¼š[`restart-project.sh`](file:///home/vue-element-admin/restart-project.sh)

**æ·»åŠ è¯´æ˜**:
```bash
# æ£€æŸ¥ç«¯å£å ç”¨ï¼ˆå›ºå®šç«¯å£ï¼šå‰ç«¯9528ï¼Œåç«¯3000ï¼‰
echo "å›ºå®šé…ç½®ï¼šå‰ç«¯9528 åç«¯3000 æ•°æ®åº“MariaDB"
```

âœ… **æ•ˆæœ**: å¯åŠ¨è„šæœ¬ä¼šæ˜ç¡®æ˜¾ç¤ºå›ºå®šé…ç½®ä¿¡æ¯

---

## ğŸ“‹ é…ç½®æ±‡æ€»è¡¨

| é…ç½®é¡¹ | å›ºå®šå€¼ | é…ç½®æ–‡ä»¶ | çŠ¶æ€ |
|--------|--------|----------|------|
| **å‰ç«¯ç«¯å£** | `9528` | `vue.config.js` | âœ… å·²å›ºå®š |
| **åç«¯ç«¯å£** | `3000` | `backend/.env` | âœ… å·²å›ºå®š |
| **æ•°æ®åº“ç±»å‹** | `MariaDB` | `backend/.env` | âœ… å·²å›ºå®š |
| **æ•°æ®åº“ä¸»æœº** | `localhost` | `backend/config/database.js` | âœ… å·²å›ºå®š |
| **æ•°æ®åº“ç«¯å£** | `3306` | `backend/config/database.js` | âœ… å·²å›ºå®š |
| **æ•°æ®åº“å** | `vue_admin` | `backend/config/database.js` | âœ… å·²å›ºå®š |
| **æ•°æ®åº“ç”¨æˆ·** | `vue_admin_user` | `backend/config/database.js` | âœ… å·²å›ºå®š |
| **æ•°æ®åº“å¯†ç ** | `vue_admin_2024` | `backend/config/database.js` | âœ… å·²å›ºå®š |
| **CORSå‰ç«¯URL** | `http://localhost:9528` | `backend/.env` | âœ… å·²å›ºå®š |

---

## ğŸš€ é‡å¯é¡¹ç›®åº”ç”¨é…ç½®

### æ¨èæ–¹å¼ï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬

```bash
# æ–¹å¼1ï¼šä½¿ç”¨restart-project.shï¼ˆæ¨èï¼‰
cd /home/vue-element-admin
./restart-project.sh

# æ–¹å¼2ï¼šä½¿ç”¨production-start.sh
./production-start.sh
```

### æ‰‹åŠ¨é‡å¯æ–¹å¼

```bash
# 1. åœæ­¢ç°æœ‰æœåŠ¡
pkill -f "node.*server"
pkill -f "vue-cli-service"

# 2. å¯åŠ¨åç«¯ï¼ˆå›ºå®šç«¯å£3000ï¼‰
cd /home/vue-element-admin/backend
nohup node server.js > /tmp/backend.log 2>&1 &

# 3. å¯åŠ¨å‰ç«¯ï¼ˆå›ºå®šç«¯å£9528ï¼‰
cd /home/vue-element-admin
nohup npm run dev > /tmp/frontend.log 2>&1 &
```

---

## âœ… éªŒè¯é…ç½®

### 1. æ£€æŸ¥ç«¯å£å ç”¨

```bash
netstat -tlnp | grep -E ":(9528|3000|3306)" | grep LISTEN
```

**é¢„æœŸè¾“å‡º**:
```
tcp  0  0  0.0.0.0:9528   0.0.0.0:*  LISTEN  [PID]/node  # å‰ç«¯
tcp  0  0  0.0.0.0:3000   0.0.0.0:*  LISTEN  [PID]/node  # åç«¯
tcp  0  0  0.0.0.0:3306   0.0.0.0:*  LISTEN  [PID]/mysqld # MariaDB
```

### 2. éªŒè¯åç«¯æœåŠ¡

```bash
curl http://localhost:3000/health
```

**é¢„æœŸè¾“å‡º**:
```json
{
  "status": "ok",
  "timestamp": "2025-10-18T...",
  "uptime": ...,
  "environment": "development"
}
```

### 3. éªŒè¯å‰ç«¯æœåŠ¡

```bash
curl -I http://localhost:9528/
```

**é¢„æœŸè¾“å‡º**:
```
HTTP/1.1 200 OK
...
```

### 4. éªŒè¯æ•°æ®åº“è¿æ¥

```bash
mysql -u vue_admin_user -pvue_admin_2024 -D vue_admin -e "SELECT 1;"
```

**é¢„æœŸè¾“å‡º**:
```
+---+
| 1 |
+---+
| 1 |
+---+
```

---

## ğŸ“ é…ç½®æ–‡ä»¶æ¸…å•

### å·²ä¿®æ”¹çš„æ–‡ä»¶

1. âœ… [`/home/vue-element-admin/vue.config.js`](file:///home/vue-element-admin/vue.config.js)
2. âœ… [`/home/vue-element-admin/.env.development`](file:///home/vue-element-admin/.env.development)
3. âœ… [`/home/vue-element-admin/backend/.env`](file:///home/vue-element-admin/backend/.env)
4. âœ… [`/home/vue-element-admin/restart-project.sh`](file:///home/vue-element-admin/restart-project.sh)

### å·²ç¡®è®¤æ— éœ€ä¿®æ”¹çš„æ–‡ä»¶

1. âœ… [`/home/vue-element-admin/backend/config/database.js`](file:///home/vue-element-admin/backend/config/database.js) - å·²æ˜¯MariaDBé…ç½®
2. âœ… [`/home/vue-element-admin/backend/server.js`](file:///home/vue-element-admin/backend/server.js) - ä½¿ç”¨ç¯å¢ƒå˜é‡PORT

### æ–°å¢æ–‡æ¡£

1. ğŸ“„ [`/home/vue-element-admin/PORT_CONFIG.md`](file:///home/vue-element-admin/PORT_CONFIG.md) - ç«¯å£é…ç½®æ–‡æ¡£
2. ğŸ“„ [`/home/vue-element-admin/å›ºå®šé…ç½®å®ŒæˆæŠ¥å‘Š.md`](file:///home/vue-element-admin/å›ºå®šé…ç½®å®ŒæˆæŠ¥å‘Š.md) - æœ¬æŠ¥å‘Š

---

## ğŸŒ è®¿é—®åœ°å€ï¼ˆå›ºå®šï¼‰

### æœ¬åœ°è®¿é—®
- ğŸ–¥ï¸ **å‰ç«¯åº”ç”¨**: http://localhost:9528
- ğŸ”Œ **åç«¯API**: http://localhost:3000
- âœ… **å¥åº·æ£€æŸ¥**: http://localhost:3000/health

### å¤–ç½‘è®¿é—®
- ğŸŒ **å‰ç«¯åº”ç”¨**: http://103.246.246.11:9528
- ğŸŒ **åç«¯API**: http://103.246.246.11:3000

---

## ğŸ”’ å®‰å…¨æé†’

### âš ï¸ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å‰å¿…é¡»ä¿®æ”¹

1. **JWTå¯†é’¥**: ä¿®æ”¹ `backend/.env` ä¸­çš„ `JWT_SECRET`
   ```env
   # å½“å‰ï¼ˆæµ‹è¯•ï¼‰
   JWT_SECRET=your-secret-key-change-in-production
   
   # å»ºè®®ä¿®æ”¹ä¸ºï¼ˆè‡³å°‘32ä½å¼ºå¯†é’¥ï¼‰
   JWT_SECRET=your-super-strong-secret-key-min-32-chars-production
   ```

2. **æ•°æ®åº“å¯†ç **: å»ºè®®ä¿®æ”¹ä¸ºæ›´å¼ºçš„å¯†ç 
   ```env
   # å½“å‰ï¼ˆå¼€å‘/æµ‹è¯•ï¼‰
   DB_PASSWORD=vue_admin_2024
   
   # å»ºè®®ä¿®æ”¹ä¸ºï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
   DB_PASSWORD=your-strong-database-password-here
   ```

3. **é˜²ç«å¢™é…ç½®**: é™åˆ¶å…è®¸è®¿é—®çš„IPåœ°å€

---

## ğŸ’¡ é‡è¦è¯´æ˜

### âœ… ä¼˜ç‚¹

1. **é…ç½®ç»Ÿä¸€**: æ‰€æœ‰é…ç½®æ–‡ä»¶å·²åŒæ­¥æ›´æ–°
2. **ä¾¿äºç»´æŠ¤**: å›ºå®šç«¯å£ä¾¿äºæ–‡æ¡£ç¼–å†™å’Œé—®é¢˜æ’æŸ¥
3. **é¿å…å†²çª**: ä¸ä¼šå› ç¯å¢ƒå˜é‡å¯¼è‡´ç«¯å£å˜åŒ–
4. **ç”Ÿäº§å°±ç»ª**: ä½¿ç”¨MariaDBç¡®ä¿æ•°æ®æŒä¹…åŒ–

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç«¯å£å ç”¨**: ç¡®ä¿9528å’Œ3000ç«¯å£æœªè¢«å…¶ä»–ç¨‹åºå ç”¨
2. **é‡å¯ç”Ÿæ•ˆ**: ä¿®æ”¹é…ç½®åå¿…é¡»é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆ
3. **æ•°æ®åº“æœåŠ¡**: ç¡®ä¿MariaDBæœåŠ¡å§‹ç»ˆè¿è¡Œ
4. **ç½‘ç»œé…ç½®**: ç¡®ä¿é˜²ç«å¢™å…è®¸ç›¸å…³ç«¯å£è®¿é—®

---

## ğŸ“ æ•…éšœæ’æŸ¥

### é—®é¢˜1: ç«¯å£è¢«å ç”¨

```bash
# æŸ¥çœ‹å ç”¨è¿›ç¨‹
lsof -i:9528
lsof -i:3000

# åœæ­¢å ç”¨è¿›ç¨‹
kill -9 <PID>

# æˆ–ä½¿ç”¨pkill
pkill -f "vue-cli-service"
pkill -f "node.*server"
```

### é—®é¢˜2: æ•°æ®åº“è¿æ¥å¤±è´¥

```bash
# æ£€æŸ¥MariaDBçŠ¶æ€
systemctl status mariadb

# å¯åŠ¨MariaDB
systemctl start mariadb

# é‡å¯MariaDB
systemctl restart mariadb
```

### é—®é¢˜3: å‰ç«¯æ— æ³•è®¿é—®åç«¯

1. æ£€æŸ¥åç«¯æ˜¯å¦è¿è¡Œ: `curl http://localhost:3000/health`
2. æ£€æŸ¥ `.env.development` ä¸­çš„APIåœ°å€
3. æ£€æŸ¥é˜²ç«å¢™è§„åˆ™
4. æŸ¥çœ‹åç«¯æ—¥å¿—: `tail -f /tmp/backend.log`

---

## ğŸ“Š é…ç½®å˜æ›´å¯¹æ¯”

### å‰ç«¯ç«¯å£é…ç½®

| é…ç½®é¡¹ | ä¿®æ”¹å‰ | ä¿®æ”¹å |
|--------|--------|--------|
| ç«¯å£å· | åŠ¨æ€ï¼ˆç¯å¢ƒå˜é‡æˆ–9528ï¼‰ | **å›ºå®š9528** |
| é…ç½®æ–¹å¼ | `process.env.port \|\| 9528` | `9528` |

### åç«¯é…ç½®

| é…ç½®é¡¹ | ä¿®æ”¹å‰ | ä¿®æ”¹å |
|--------|--------|--------|
| ç«¯å£å· | åŠ¨æ€ï¼ˆç¯å¢ƒå˜é‡æˆ–3000ï¼‰ | **å›ºå®š3000** |
| CORSå‰ç«¯URL | `http://localhost:9530` | **http://localhost:9528** |
| æ•°æ®åº“ç”¨æˆ· | `root` | **vue_admin_user** |
| æ•°æ®åº“å¯†ç  | ç©º | **vue_admin_2024** |

---

## âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•

- [x] å‰ç«¯ç«¯å£å›ºå®šä¸º 9528
- [x] åç«¯ç«¯å£å›ºå®šä¸º 3000
- [x] æ•°æ®åº“å›ºå®šä¸º MariaDB
- [x] æ•°æ®åº“é…ç½®å·²ç»Ÿä¸€
- [x] CORSé…ç½®å·²æ›´æ–°
- [x] ç¯å¢ƒé…ç½®æ–‡ä»¶å·²æ›´æ–°
- [x] å¯åŠ¨è„šæœ¬å·²ä¼˜åŒ–
- [x] é…ç½®æ–‡æ¡£å·²åˆ›å»º

---

## ğŸ¯ ä¸‹ä¸€æ­¥æ“ä½œ

1. **é‡å¯é¡¹ç›®**: ä½¿ç”¨ `./restart-project.sh` é‡å¯é¡¹ç›®ä»¥åº”ç”¨æ‰€æœ‰é…ç½®
2. **éªŒè¯æœåŠ¡**: è®¿é—® http://localhost:9528 éªŒè¯å‰ç«¯
3. **æµ‹è¯•API**: è®¿é—® http://localhost:3000/health éªŒè¯åç«¯
4. **æ£€æŸ¥æ•°æ®åº“**: ç¡®è®¤æ•°æ®åº“è¿æ¥æ­£å¸¸

---

**é…ç½®å®Œæˆæ—¶é—´**: 2025-10-18  
**é…ç½®çŠ¶æ€**: âœ… æ‰€æœ‰é…ç½®å·²å›ºå®š  
**éœ€è¦é‡å¯**: âš ï¸ æ˜¯ï¼Œéœ€è¦é‡å¯é¡¹ç›®ä»¥åº”ç”¨é…ç½®  
**é…ç½®ç‰ˆæœ¬**: v1.0-fixed

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- ğŸ“„ [ç«¯å£é…ç½®è¯¦ç»†æ–‡æ¡£](file:///home/vue-element-admin/PORT_CONFIG.md)
- ğŸ“„ [å¯åŠ¨è„šæœ¬è¯´æ˜](file:///home/vue-element-admin/restart-project.sh)
- ğŸ“„ [æ•°æ®åº“é…ç½®](file:///home/vue-element-admin/backend/config/database.js)

---

**ç»´æŠ¤çŠ¶æ€**: âœ… é…ç½®å·²å›ºå®šï¼Œæ— éœ€å†æ¬¡è°ƒæ•´

# ğŸ”§ ç™»å½• Network Error é—®é¢˜è§£å†³æŒ‡å—

## é—®é¢˜æè¿°
ä½¿ç”¨ admin è´¦å·ç™»å½•æ—¶æç¤º **Network Error**

## ğŸ¯ é—®é¢˜åŸå› 

1. **APIè·¯å¾„ä¸åŒ¹é…**: å‰ç«¯è°ƒç”¨çš„è·¯å¾„ä¸åç«¯è·¯ç”±ä¸ä¸€è‡´
2. **ç¼ºå°‘ç®¡ç†å‘˜è´¦å·**: æ•°æ®åº“ä¸­æ²¡æœ‰ admin è´¦å·æ•°æ®
3. **å¯¼å…¥é”™è¯¯**: user.js ä¸­ç¼ºå°‘å¿…è¦çš„å‡½æ•°å¯¼å…¥

## âœ… å·²ä¿®å¤çš„é—®é¢˜

### 1. ä¿®å¤ API å¯¼å…¥é”™è¯¯
**æ–‡ä»¶**: `src/store/modules/user.js`
```javascript
// ä¿®å¤å‰
import { getUserList } from '@/api/database'

// ä¿®å¤å
import { login, getInfo, logout } from '@/api/user'
```

### 2. ä¿®æ­£ API è·¯å¾„
**æ–‡ä»¶**: `src/api/user.js`
```javascript
// ä¿®å¤å‰
url: '/vue-element-admin/user/login'

// ä¿®å¤å
url: '/api/auth/login'
```

### 3. å®Œå–„åç«¯è®¤è¯æ¥å£
**æ–‡ä»¶**: `backend/routes/auth.js`
- âœ… æ·»åŠ  `/api/auth/info` è·å–ç”¨æˆ·ä¿¡æ¯æ¥å£
- âœ… æ·»åŠ  `/api/auth/logout` ç™»å‡ºæ¥å£
- âœ… æ”¯æŒä»£ç†å’Œå®¢æˆ·ä¸¤ç§ç”¨æˆ·ç±»å‹

## ğŸš€ è§£å†³æ–¹æ¡ˆï¼ˆä¸¤ç§æ–¹å¼ï¼‰

### æ–¹å¼ä¸€ï¼šä½¿ç”¨åˆå§‹åŒ–å·¥å…·åˆ›å»ºç®¡ç†å‘˜ï¼ˆæ¨èï¼‰

1. **æ‰“å¼€åˆå§‹åŒ–å·¥å…·**
   ```
   åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼šfile:///home/vue-element-admin/init-admin-database.html
   ```

2. **ç‚¹å‡»"åˆ›å»ºæ•°æ®åº“ç®¡ç†å‘˜"æŒ‰é’®**
   - å·¥å…·ä¼šè‡ªåŠ¨è¿æ¥åç«¯æœåŠ¡
   - åœ¨æ•°æ®åº“ä¸­åˆ›å»º admin ç®¡ç†å‘˜è´¦å·

3. **ç‚¹å‡»"æµ‹è¯•ç™»å½•"éªŒè¯**
   - ç¡®ä¿ç®¡ç†å‘˜è´¦å·åˆ›å»ºæˆåŠŸ
   - éªŒè¯ç™»å½•åŠŸèƒ½æ­£å¸¸

4. **è¿”å›ç™»å½•é¡µé¢ç™»å½•**
   ```
   ç”¨æˆ·å: admin
   å¯†ç : 111111
   ```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨åˆ›å»ºç®¡ç†å‘˜è´¦å·

#### æ­¥éª¤ 1: ç¡®ä¿åç«¯æœåŠ¡è¿è¡Œ
```bash
cd /home/vue-element-admin/backend
node server.js
```

#### æ­¥éª¤ 2: ä½¿ç”¨ API åˆ›å»ºç®¡ç†å‘˜
```bash
curl -X POST http://localhost:3000/api/agents \
  -H "Content-Type: application/json" \
  -d '{
    "loginAccount": "admin",
    "loginPassword": "111111",
    "agentName": "ç³»ç»Ÿç®¡ç†å‘˜",
    "agentCode": "ADMIN001",
    "email": "admin@system.com",
    "phone": "13800138000",
    "level": 1,
    "commission": 0,
    "salePriceRate": 1,
    "status": 1
  }'
```

#### æ­¥éª¤ 3: éªŒè¯è´¦å·åˆ›å»º
```bash
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"111111"}'
```

## ğŸ“Š ç³»ç»Ÿæ¶æ„è¯´æ˜

### å½“å‰ç™»å½•æµç¨‹
```
å‰ç«¯ç™»å½• â†’ /api/auth/login â†’ åç«¯éªŒè¯æ•°æ®åº“ â†’ è¿”å›Token â†’ å‰ç«¯å­˜å‚¨ â†’ è·å–ç”¨æˆ·ä¿¡æ¯
```

### API ç«¯ç‚¹
| æ¥å£ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/auth/login` | POST | ç”¨æˆ·ç™»å½• |
| `/api/auth/info` | GET | è·å–ç”¨æˆ·ä¿¡æ¯ |
| `/api/auth/logout` | POST | ç”¨æˆ·ç™»å‡º |

### ç”¨æˆ·ç±»å‹
- **agent (ä»£ç†)**: å…·æœ‰ç®¡ç†å‘˜æƒé™ï¼Œroles: ['admin', 'agent']
- **customer (å®¢æˆ·)**: æ™®é€šç”¨æˆ·æƒé™ï¼Œroles: ['customer']

## ğŸ” æ•…éšœæ’æŸ¥æ­¥éª¤

### 1. æ£€æŸ¥åç«¯æœåŠ¡
```bash
# æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
curl http://localhost:3000/health

# åº”è¯¥è¿”å›
{"status":"ok","timestamp":"...","uptime":...}
```

### 2. æ£€æŸ¥å‰ç«¯æœåŠ¡
```bash
# æ£€æŸ¥å‰ç«¯æœåŠ¡æ˜¯å¦è¿è¡Œ
curl http://localhost:9528/

# åº”è¯¥è¿”å› HTML å†…å®¹
```

### 3. æ£€æŸ¥æ•°æ®åº“è¿æ¥
```bash
# æ£€æŸ¥æ•°æ®åº“
mysql -u root -e "USE vue_admin; SELECT * FROM agents WHERE login_account='admin';"
```

### 4. æµ‹è¯•ç™»å½•API
```bash
# æµ‹è¯•ç™»å½•æ¥å£
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"111111"}'
```

## ğŸ¯ ç®¡ç†å‘˜è´¦å·ä¿¡æ¯

åˆ›å»ºæˆåŠŸåçš„ç®¡ç†å‘˜è´¦å·ï¼š

| å­—æ®µ | å€¼ |
|------|------|
| **ç”¨æˆ·å** | admin |
| **å¯†ç ** | 111111 |
| **è´¦å·ç±»å‹** | ä»£ç†ï¼ˆç®¡ç†å‘˜ï¼‰ |
| **æƒé™** | admin, agent |
| **é‚®ç®±** | admin@system.com |
| **ç”µè¯** | 13800138000 |

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **åç«¯æœåŠ¡å¿…é¡»è¿è¡Œ**: ç¡®ä¿ `node server.js` åœ¨åå°è¿è¡Œ
2. **ç«¯å£ä¸èƒ½å†²çª**: 3000ç«¯å£ç”¨äºåç«¯ï¼Œ9528ç«¯å£ç”¨äºå‰ç«¯
3. **æ•°æ®åº“å¿…é¡»å¯ç”¨**: MariaDB æœåŠ¡å¿…é¡»æ­£å¸¸è¿è¡Œ
4. **é¦–æ¬¡ç™»å½•**: å¿…é¡»å…ˆåˆ›å»ºç®¡ç†å‘˜è´¦å·æ‰èƒ½ç™»å½•

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q1: ç‚¹å‡»ç™»å½•åæç¤º Network Error
**A**: æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦è¿è¡Œï¼Œè¿è¡Œ `netstat -tlnp | grep 3000` ç¡®è®¤

### Q2: æç¤º"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"
**A**: ç¡®è®¤æ˜¯å¦å·²åˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼Œä½¿ç”¨åˆå§‹åŒ–å·¥å…·åˆ›å»º

### Q3: ç™»å½•æˆåŠŸä½†é¡µé¢ç©ºç™½
**A**: æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼Œå¯èƒ½æ˜¯æƒé™é…ç½®é—®é¢˜

### Q4: åˆå§‹åŒ–å·¥å…·æ— æ³•è¿æ¥åç«¯
**A**: 
- æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€
- ç¡®è®¤ç«¯å£ 3000 æœªè¢«å ç”¨
- æŸ¥çœ‹åç«¯æ—¥å¿—ç¡®è®¤æœåŠ¡å¯åŠ¨æˆåŠŸ

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°å…¶ä»–é—®é¢˜ï¼š

1. æŸ¥çœ‹åç«¯æ—¥å¿—: `cd backend && tail -f logs/*.log`
2. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
3. æ£€æŸ¥ç½‘ç»œè¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ï¼ˆNetwork æ ‡ç­¾ï¼‰

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2025-10-13  
**ä¿®å¤å†…å®¹**: APIè·¯å¾„ä¿®æ­£ + è®¤è¯æ¥å£å®Œå–„ + ç®¡ç†å‘˜åˆå§‹åŒ–å·¥å…·  
**å½“å‰çŠ¶æ€**: âœ… å·²ä¿®å¤ï¼Œå¯æ­£å¸¸ç™»å½•

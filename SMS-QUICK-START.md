# 📱 短信功能快速上手指南

## 🎯 立即开始使用

### 访问地址
- **前端**: http://103.246.246.11:9527
- **后端API**: http://103.246.246.11:3000

---

## 👨‍💼 管理员操作

### 第一步：配置短信通道

1. 登录管理员账号
2. 进入菜单：**短信管理 → 通道配置**
3. 点击"新增通道"按钮
4. 填写通道信息：

```
通道名称: 印度SMS57通道
国家: India
每条短信价格: 0.0050 (美元)
最大字符数: 160
网关地址: https://api.sms57.com/send
账号: your_sms57_account
密码: your_sms57_password
平台类型: sms57
状态: 启用
```

5. 点击"确定"保存

### 第二步：查看发送记录

1. 进入菜单：**短信管理 → 发送记录**
2. 可以筛选：
   - 客户名称
   - 国家
   - 状态（成功/失败/发送中）
   - 发送时间范围
3. 点击"详情"查看完整信息

### 第三步：查看统计数据

1. 进入菜单：**短信管理 → 短信统计**
2. 选择统计周期：
   - 今日
   - 本周
   - 本月
   - 自定义时间范围
3. 查看数据：
   - 按国家统计
   - 按客户统计（Top 10）
   - 按通道统计

---

## 👤 客户操作

### 第一步：发送第一条短信

1. 登录客户账号
2. 进入菜单：**短信管理 → 短信群发**
3. 填写发送信息：

```
国家: India （会自动加载可用通道）
短信内容: Hello, this is a test message!
         （系统会自动显示字符数）
号码来源: 
  - 选项1: 从已购买数据选择
  - 选项2: 手动输入号码（每行一个）
发送方式:
  - 立即发送
  - 定时发送（选择具体时间）
```

4. 查看费用预估：`预计费用: $0.0050 × 号码数量`
5. 确认余额充足
6. 点击"发送"

### 第二步：查看任务状态

1. 进入菜单：**短信管理 → 任务管理**
2. 查看不同状态的任务：
   - **正在发送**: 实时显示进度（30秒自动刷新）
   - **发送完成**: 已完成的任务
   - **定时任务**: 待发送的定时任务
   - **已取消**: 已取消的任务
3. 可以操作：
   - 取消正在发送的任务
   - 查看任务详情
   - 查看该任务的发送记录

### 第三步：查看发送记录

1. 进入菜单：**短信管理 → 发送记录**
2. 查看下行日志：
   - 发送状态（成功/失败）
   - 送达时间
   - 费用明细
   - 错误信息（如果失败）
3. 支持筛选：
   - 手机号码
   - 国家
   - 状态
   - 发送时间

### 第四步：查看数据统计

1. 进入菜单：**短信管理 → 数据统计**
2. 查看概览数据：
   - 总发送量
   - 成功数量和成功率
   - 总费用和平均单价
   - 任务总数
3. 查看详细分析：
   - 按国家统计
   - 费用分布
   - 发送趋势

---

## 💡 使用技巧

### 1. 号码格式要求
- **手动输入**: 每行一个号码
- **格式**: 带国家码（如: +91xxxxxxxxxx）
- **示例**:
  ```
  +919876543210
  +919876543211
  +919876543212
  ```

### 2. 字符数计算
- 英文字母、数字: 1个字符
- 特殊符号: 1个字符
- 换行: 1个字符
- **建议**: 控制在160字符以内

### 3. 费用计算
```
总费用 = 号码数量 × 每条价格

例如:
- 100个号码 × $0.0050 = $0.50
- 1000个号码 × $0.0050 = $5.00
```

### 4. 发送时间选择
- **立即发送**: 提交后立即开始发送
- **定时发送**: 可选择未来的任意时间
- **注意**: 定时发送会预扣费用

### 5. 任务管理
- 正在发送的任务可以取消
- 取消后已扣费用不退还
- 任务列表30秒自动刷新

---

## ⚠️ 常见问题

### Q1: 发送失败怎么办？
**A**: 
1. 检查余额是否充足
2. 查看错误信息（在发送记录中）
3. 确认号码格式正确
4. 联系管理员检查通道状态

### Q2: 如何知道短信送达了？
**A**: 
1. 进入"发送记录"
2. 查看"送达情况"列
3. 成功的短信会显示送达时间
4. 如: "已送达 2分钟"

### Q3: 定时任务如何取消？
**A**: 
1. 进入"任务管理"
2. 切换到"定时任务"标签
3. 找到要取消的任务
4. 点击"取消任务"按钮

### Q4: 支持中文短信吗？
**A**: 
- 取决于短信通道配置
- 中文字符占用更多字符数
- 建议先测试小批量发送

### Q5: 一次最多发多少条？
**A**: 
- 系统没有硬性限制
- 建议分批发送（每批1000-5000条）
- 大批量发送联系管理员

---

## 📊 界面预览

### 管理员界面

#### 通道配置
```
┌─────────────────────────────────────────┐
│ 通道配置                    [+新增通道] │
├─────────────────────────────────────────┤
│ 通道名称 | 国家  | 价格    | 状态      │
├─────────────────────────────────────────┤
│ 印度SMS57 | India | $0.0050 | 启用   ✓ │
│ 美国SMS57 | USA   | $0.0080 | 禁用   ✗ │
└─────────────────────────────────────────┘
```

#### 发送记录
```
┌─────────────────────────────────────────────────┐
│ 发送记录                                        │
│ 客户: [____] 国家: [____] 状态: [____] [查询]  │
├─────────────────────────────────────────────────┤
│ 客户    | 号码         | 状态   | 费用      │
├─────────────────────────────────────────────────┤
│ user123 | +9198765... | 成功 ✓ | $0.0050  │
│ user456 | +9198766... | 失败 ✗ | $0.0000  │
└─────────────────────────────────────────────────┘
```

### 客户界面

#### 短信群发
```
┌─────────────────────────────────────────┐
│ 短信群发                                │
├─────────────────────────────────────────┤
│ 国家: [India ▼]                         │
│ 通道: 印度SMS57通道 (价格: $0.0050)     │
│                                         │
│ 短信内容:                               │
│ ┌─────────────────────────────────────┐ │
│ │ Hello, this is a test!              │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│ 字符数: 26                              │
│                                         │
│ 号码来源:                               │
│ ○ 从已购买数据选择  ● 手动输入          │
│ ┌─────────────────────────────────────┐ │
│ │ +919876543210                       │ │
│ │ +919876543211                       │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ 发送方式: ● 立即发送 ○ 定时发送        │
│                                         │
│ 预计费用: $0.0100                       │
│ 账户余额: $100.00                       │
│                                         │
│          [取消]      [发送]             │
└─────────────────────────────────────────┘
```

#### 任务管理
```
┌─────────────────────────────────────────────────┐
│ [正在发送] [发送完成] [定时任务] [已取消]      │
├─────────────────────────────────────────────────┤
│ 任务名称      | 进度      | 状态   | 操作      │
├─────────────────────────────────────────────────┤
│ 短信群发任务  | ████ 50%  | 发送中 | [取消]    │
│ ID: 12345     | 50/100    |        | [查看]    │
└─────────────────────────────────────────────────┘
```

---

## 🚀 下一步

- [ ] 测试发送功能
- [ ] 查看发送记录
- [ ] 分析统计数据
- [ ] 根据需求调整

---

## 📞 需要帮助？

如遇问题，请检查：
1. 服务状态: `pm2 status`
2. 后端日志: `pm2 logs backend --lines 50`
3. 前端日志: `pm2 logs frontend --lines 50`

**祝您使用愉快！** 🎉

<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ç”¨æˆ·ç™»å½•è°ƒè¯•å·¥å…·</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
    .container { max-width: 1200px; margin: 0 auto; }
    .header { text-align: center; color: white; margin-bottom: 30px; }
    .header h1 { font-size: 32px; margin-bottom: 10px; }
    .card { background: white; border-radius: 12px; padding: 30px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .card-title { font-size: 20px; font-weight: 600; margin-bottom: 20px; color: #333; border-left: 4px solid #667eea; padding-left: 12px; }
    .search-box { display: flex; gap: 10px; margin-bottom: 20px; }
    .search-box input { flex: 1; padding: 12px 16px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 14px; }
    .search-box button { padding: 12px 24px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; }
    .user-info { background: #f8f9fa; border-radius: 8px; padding: 20px; margin-top: 20px; }
    .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
    .info-item { display: flex; padding: 10px; background: white; border-radius: 6px; }
    .info-label { font-weight: 600; color: #666; min-width: 100px; }
    .status-badge { padding: 4px 12px; border-radius: 12px; font-size: 12px; }
    .status-active { background: #d4edda; color: #155724; }
    .status-inactive { background: #f8d7da; color: #721c24; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 12px; text-align: left; border-bottom: 1px solid #e0e0e0; }
    th { background: #f8f9fa; font-weight: 600; }
    .action-btn { padding: 6px 12px; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 5px; }
    .alert { padding: 15px 20px; border-radius: 8px; margin: 20px 0; }
    .alert-success { background: #d4edda; border-left: 4px solid #28a745; color: #155724; }
    .alert-danger { background: #f8d7da; border-left: 4px solid #dc3545; color: #721c24; }
    .alert-warning { background: #fff3cd; border-left: 4px solid #ffc107; color: #856404; }
    .form-group { margin-bottom: 15px; }
    .form-group label { display: block; margin-bottom: 5px; font-weight: 500; }
    .form-group input { width: 100%; padding: 10px; border: 2px solid #e0e0e0; border-radius: 6px; }
    code { background: #f4f4f4; padding: 2px 6px; border-radius: 3px; color: #e83e8c; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ” ç”¨æˆ·ç™»å½•è°ƒè¯•å·¥å…·</h1>
      <p>å¸®åŠ©æ‚¨æ£€æŸ¥å’Œè°ƒè¯•ç”¨æˆ·ç™»å½•é—®é¢˜</p>
    </div>

    <div class="card">
      <h2 class="card-title">ğŸ” æœç´¢ç”¨æˆ·</h2>
      <div class="search-box">
        <input type="text" id="searchUsername" placeholder="è¾“å…¥ç™»å½•è´¦å·ï¼Œå¦‚: KL01880V01" />
        <button onclick="searchUser()">æœç´¢</button>
        <button onclick="showAllUsers()" style="background: #28a745;">æ˜¾ç¤ºå®¢æˆ·</button>
      </div>
      <div id="searchResult"></div>
    </div>

    <div class="card">
      <h2 class="card-title">ğŸ§ª æµ‹è¯•ç™»å½•</h2>
      <div class="form-group">
        <label>ç™»å½•è´¦å·</label>
        <input type="text" id="testUsername" value="KL01880V01" />
      </div>
      <div class="form-group">
        <label>ç™»å½•å¯†ç </label>
        <input type="password" id="testPassword" value="123456" />
      </div>
      <button class="action-btn" onclick="testLogin()">æµ‹è¯•ç™»å½•</button>
      <div id="loginResult"></div>
    </div>

    <div class="card">
      <h2 class="card-title">ğŸ‘¥ ç”¨æˆ·åˆ—è¡¨</h2>
      <div id="userList"></div>
    </div>
  </div>

  <script>
    function searchUser() {
      const username = document.getElementById('searchUsername').value.trim();
      const users = JSON.parse(localStorage.getItem('userList') || '[]');
      const user = users.find(u => u.loginAccount === username);
      
      const resultDiv = document.getElementById('searchResult');
      if (user) {
        resultDiv.innerHTML = `
          <div class="user-info">
            <h3>âœ… æ‰¾åˆ°å®¢æˆ·: ${user.customerName}</h3>
            <div class="info-grid">
              <div class="info-item"><span class="info-label">ç™»å½•è´¦å·:</span><code>${user.loginAccount}</code></div>
              <div class="info-item"><span class="info-label">ç™»å½•å¯†ç :</span><code>${user.loginPassword}</code></div>
              <div class="info-item"><span class="info-label">çŠ¶æ€:</span>
                <span class="status-badge ${user.status === 1 ? 'status-active' : 'status-inactive'}">
                  ${user.status === 1 ? 'æ¿€æ´»' : 'åœç”¨'}
                </span>
              </div>
            </div>
            ${user.status !== 1 ? '<div class="alert alert-warning">âš ï¸ ç”¨æˆ·çŠ¶æ€ä¸º"åœç”¨"ï¼Œæ— æ³•ç™»å½•</div>' : '<div class="alert alert-success">âœ… å¯ä»¥ç™»å½•</div>'}
          </div>
        `;
      } else {
        resultDiv.innerHTML = '<div class="alert alert-danger">âŒ æœªæ‰¾åˆ°ç”¨æˆ·</div>';
      }
    }

    function showAllUsers() {
      const users = JSON.parse(localStorage.getItem('userList') || '[]');
      const html = users.length ? `
        <table>
          <tr><th>å®¢æˆ·åç§°</th><th>ç™»å½•è´¦å·</th><th>å¯†ç </th><th>çŠ¶æ€</th><th>æ“ä½œ</th></tr>
          ${users.map(u => `
            <tr>
              <td>${u.customerName}</td>
              <td><code>${u.loginAccount}</code></td>
              <td><code>${u.loginPassword}</code></td>
              <td><span class="status-badge ${u.status === 1 ? 'status-active' : 'status-inactive'}">${u.status === 1 ? 'æ¿€æ´»' : 'åœç”¨'}</span></td>
              <td><button class="action-btn" onclick="fillLogin('${u.loginAccount}','${u.loginPassword}')">æµ‹è¯•</button></td>
            </tr>
          `).join('')}
        </table>
      ` : '<div class="alert alert-warning">æš‚æ— å®¢æˆ·æ•°æ®</div>';
      document.getElementById('userList').innerHTML = html;
    }

    function fillLogin(username, password) {
      document.getElementById('testUsername').value = username;
      document.getElementById('testPassword').value = password;
    }

    function testLogin() {
      const username = document.getElementById('testUsername').value.trim();
      const password = document.getElementById('testPassword').value;
      const users = JSON.parse(localStorage.getItem('userList') || '[]');
      const user = users.find(u => u.loginAccount === username && u.loginPassword === password && u.status === 1);
      
      const resultDiv = document.getElementById('loginResult');
      if (user) {
        resultDiv.innerHTML = '<div class="alert alert-success">âœ… ç™»å½•æˆåŠŸï¼å¯ä»¥åœ¨ç™»å½•é¡µé¢ä½¿ç”¨æ­¤è´¦å·å¯†ç ç™»å½•ã€‚</div>';
      } else {
        const exists = users.find(u => u.loginAccount === username);
        if (exists) {
          if (exists.loginPassword !== password) {
            resultDiv.innerHTML = `<div class="alert alert-danger">âŒ å¯†ç é”™è¯¯ï¼æ­£ç¡®å¯†ç : <code>${exists.loginPassword}</code></div>`;
          } else {
            resultDiv.innerHTML = '<div class="alert alert-danger">âŒ è´¦æˆ·æœªæ¿€æ´»</div>';
          }
        } else {
          resultDiv.innerHTML = '<div class="alert alert-danger">âŒ è´¦å·ä¸å­˜åœ¨</div>';
        }
      }
    }

    window.onload = () => showAllUsers();
  </script>
</body>
</html>
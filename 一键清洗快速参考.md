# 一键清洗 - 快速参考

## 🔄 处理步骤（新顺序）

```
步骤1 → 步骤2 → 步骤3
  ↓       ↓       ↓
去异常   去重   加国码
```

## 📋 步骤详解

### 步骤1️⃣：去除异常数据

**去除条件**（满足任一即去除）：
- ❌ 小于7位：`123`
- ❌ 大于15位：`12345678901234567890`
- ❌ 含非数字：`12abc34567`
- ❌ 超8位相同：`8488888888888`

**保留条件**（全部满足才保留）：
- ✅ 7-15位
- ✅ 纯数字
- ✅ 最多7位连续相同数字

### 步骤2️⃣：去除重复数据

**规则**：
- 完全相同的号码只保留一个
- 大小写不敏感
- 去除+号和空格后比对

**示例**：
```
5512345678    ✅ 保留
5512345678    ❌ 去除（重复）
+5512345678   ❌ 去除（去+后重复）
```

### 步骤3️⃣：智能校验国码

**规则**：
- 检查前N位（N=国码长度）
- 前缀 = 国码 → 保留
- 前缀 ≠ 国码 → 添加

**示例（墨西哥52）**：
```
5512345678   → 前2位=55 → 添加 → 525512345678
525512345678 → 前2位=52 → 保留 → 525512345678
```

## 🎯 检查规则

### 长度检查
```
6位    ❌ 太短
7位    ✅ 最小
10位   ✅ 正常
15位   ✅ 最大
16位   ❌ 太长
```

### 相同数字检查

**正则**：`/(\d)\1{7,}/`

**含义**：任意数字连续出现8次或以上

**示例**：
```
88888888     ❌ 8个8
8888887      ✅ 7个8
555555555    ❌ 9个5
85858585     ✅ 不连续
```

## 📊 处理示例

### 输入数据
```
5512345678          # 正常
525512345678        # 已有国码
123                 # 太短
8488888888888       # 8个8
5512345678          # 重复
12abc34567          # 含字母
```

### 步骤1：去异常
```
保留：
5512345678          ✅
525512345678        ✅
5512345678          ✅ (重复，但此步不去重)

去除：
123                 ❌ 太短
8488888888888       ❌ 8个8
12abc34567          ❌ 含字母
```

### 步骤2：去重
```
保留：
5512345678          ✅ (保留一个)
525512345678        ✅

去除：
5512345678          ❌ (重复)
```

### 步骤3：加国码（墨西哥52）
```
最终：
525512345678        ✅ (添加52)
525512345678        ✅ (已有52)
```

## 💡 记住

### 顺序
```
清理 → 去重 → 加码
先扫后洗再穿衣
```

### 长度
```
7 ≤ 长度 ≤ 15
```

### 相同
```
连续8个 = 异常
连续7个 = 正常
```

### 国码
```
看前缀，不看+
有国码，就留
无国码，就加
```

---

**更新时间**：2025-10-15
